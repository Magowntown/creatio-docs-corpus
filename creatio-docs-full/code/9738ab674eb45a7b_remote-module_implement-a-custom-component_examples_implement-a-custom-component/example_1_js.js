/* Declare the AMD module. */define("UsrTimelineModule", ["@creatio-devkit/common", "Base7xViewElement", "ckeditor-base"], function (sdk, Base7xViewElement) {    /* Declare a "UsrTimelineModule" class. */    class UsrTimelineModule extends Base7xViewElement {        set primaryColumnValue(value) {            this._primaryColumnValue = value;            this._init();        }        get primaryColumnValue() {            return this._primaryColumnValue;        }        set entitySchemaName(value) {            this._entitySchemaName = value;            this._init();        }        get entitySchemaName() {            return this._entitySchemaName;        }        set cardSchemaName(value) {            this._cardSchemaName = value;            this._init();        }        get cardSchemaName() {            return this._entitySchemaName;        }        constructor() {            super("Timeline");        }        _init() {            if (this._primaryColumnValue && this._cardSchemaName && this._entitySchemaName) {                this.initContext(() => {                    this._moduleId = this.sandbox.id + "_UsrTimelineModule";                    this.sandbox.subscribe("GetColumnsValues", (attributeNames) => this._getColumnValues(attributeNames), null, [this._moduleId]);                    this.sandbox.subscribe("GetEntityInfo", () => this._getEntityInfo(), null, [this._moduleId]);                    this._loadTimelineSchemaModule();                });            }        }        _loadTimelineSchemaModule() {            this._moduleId = this.sandbox.loadModule("BaseSchemaModuleV2", {                id: this._moduleId,                renderTo: this._renderTo,                instanceConfig: {                    schemaName: "TimelineSchema",                    isSchemaConfigInitialized: true,                    useHistoryState: false,                    showMask: true,                    parameters: {                        viewModelConfigDiff: {                            "CardSchemaName": this._cardSchemaName,                            "ReferenceSchemaName": this._entitySchemaName,                            "InitialConfig": {                                "entities": []                            }                        },                    },                }            });        }        _getColumnValues(attributeNames) {            const values = {};            attributeNames?.forEach((attributeName) => {                switch (attributeName) {                    case "Id":                        values[attributeName] = this._primaryColumnValue?.value;                        break;                    case "Name":                        values[attributeName] = this._primaryColumnValue?.displayValue;                        break;                    default: break;                }            });            return values;        }        _getEntityInfo() {            return {                entitySchemaName: this._entitySchemaName,                primaryColumnValue: this._primaryColumnValue?.value,                primaryDisplayColumnValue: this._primaryColumnValue?.displayValue            };        }        getMessages() {            const messages = super.getMessages();            return Object.assign(messages, {                "GetColumnsValues": {                    mode: Terrasoft.MessageMode.PTP,                    direction: Terrasoft.MessageDirectionType.SUBSCRIBE                },                "GetEntityInfo": {                    mode: Terrasoft.MessageMode.PTP,                    direction: Terrasoft.MessageDirectionType.SUBSCRIBE                }            });        }        disconnectedCallback() {            this.sandbox.unloadModule(this._moduleId, this._renderTo);        }    }});