define("UsrCurrencyIndicatorModule", ["UsrCurrencyIndicatorModuleResources", "IndicatorModule"], function() {    // Class that generates the configuration of the currency indicator module view..    Ext.define("Terrasoft.configuration.CurrencyIndicatorViewConfig", {        extend: "Terrasoft.BaseModel",        alternateClassName: "Terrasoft.CurrencyIndicatorViewConfig",        // Generates the configuration of the currency indicator module view.        generate: function(config) {            var style = config.style || "";            var fontStyle = config.fontStyle || "";            var wrapClassName = Ext.String.format("{0}", style);            var id = Terrasoft.Component.generateId();            // The returned configuration view object.            var result = {                "name": id,                "itemType": Terrasoft.ViewItemType.CONTAINER,                "classes": {wrapClassName: [wrapClassName, "indicator-module-wrapper"]},                "styles": {                    "display": "table",                    "width": "100%",                    "height": "100%"                },                "items": [                    {                        "name": id + "-wrap",                        "itemType": Terrasoft.ViewItemType.CONTAINER,                        "styles": {                            "display": "table-cell",                            "vertical-align": "middle"                        },                        "classes": {wrapClassName: ["indicator-wrap"]},                        "items": [                            // Display the name of the currency.                            {                                "name": "indicator-caption" + id,                                "itemType": Terrasoft.ViewItemType.LABEL,                                "caption": {"bindTo": "CurrencyName"},                                "classes": {"labelClass": ["indicator-caption"]}                            },                            // Display the currency exchange rate.                            {                                "name": "indicator-value" + id,                                "itemType": Terrasoft.ViewItemType.LABEL,                                "caption": {                                    "bindTo": "CurrencyValue"                                },                                "classes": {"labelClass": ["indicator-value " + fontStyle]}                            }                        ]                    }                ]            };            return result;        }    });    // Class of the view model of the currency indicator module.    Ext.define("Terrasoft.configuration.CurrencyIndicatorViewModel", {        extend: "Terrasoft.BaseModel",        alternateClassName: "Terrasoft.CurrencyIndicatorViewModel",        Ext: null,        Terrasoft: null,        sandbox: null,        columns: {            // Currency name.            CurrencyName: {                type: Terrasoft.core.enums.ViewModelSchemaItem.ATTRIBUTE,                dataValueType: Terrasoft.DataValueType.TEXT,                value: null            },            // Currency value.            CurrencyValue: {                type: Terrasoft.core.enums.ViewModelSchemaItem.ATTRIBUTE,                dataValueType: Terrasoft.DataValueType.FLOAT,                value: null            }        },        onRender: Ext.emptyFn,        // Returns the currency value, depending on the name. This method is given as an example.        // For each specific task, you should select an individual method to obtain data,        // for example REST API, database query, etc.        getCurrencyValue: function(currencyName, callback, scope) {            var result = 0;            if (currencyName === "USD") {                result = 26;            }            if (currencyName === "EUR") {                result = 32.3;            }            if (currencyName === "RUB") {                result = 0.45;            }            callback.call(scope || this, result);        },        // Gets the data and displays them on the widget.        prepareIndicator: function(callback, scope) {            this.getCurrencyValue(this.get("CurrencyName"), function(currencyValue) {                this.set("CurrencyValue", currencyValue);                callback.call(scope);            }, this);        },        // Initializes the widget.        init: function(callback, scope) {            this.prepareIndicator(callback, scope);        }    });    // Widget module class.    Ext.define("Terrasoft.configuration.CurrencyIndicatorModule", {        extend: "Terrasoft.IndicatorModule",        alternateClassName: "Terrasoft.CurrencyIndicatorModule",        // The name of the wdget view model class.        viewModelClassName: "Terrasoft.CurrencyIndicatorViewModel",        // The name of the view configuration generating class.        viewConfigClassName: "Terrasoft.CurrencyIndicatorViewConfig",        // Subscribing to messages from third-party modules.        subscribeMessages: function() {            this.sandbox.subscribe("GenerateIndicator", this.onGenerateIndicator, this, [this.sandbox.id]);        }    });    return Terrasoft.CurrencyIndicatorModule;});