-- Use the RULE instead of the INSTEAD OF trigger-- Microsoft SQLIF EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[VwAdministrativeObjects]'))DROP VIEW [dbo].[VwAdministrativeObjects]GOCREATE VIEW [dbo].[VwAdministrativeObjects]ASWITH[SysSchemaAdministrationProperties] AS (SELECT [AdministrationPropertiesAll].[Id] AS [SysSchemaId],    max([AdministrationPropertiesAll].[AdministratedByOperations]) AS [AdministratedByOperations],    max([AdministrationPropertiesAll].[AdministratedByColumns]) AS [AdministratedByColumns],    max([AdministrationPropertiesAll].[AdministratedByRecords]) AS [AdministratedByRecords],    max([AdministrationPropertiesAll].[IsTrackChangesInDB]) AS [IsTrackChangesInDB]FROM (    SELECT [SysSchema].[Id],            (CASE WHEN EXISTS (                SELECT 1                FROM [SysSchemaProperty]                WHERE (([SysSchemaProperty].[SysSchemaId] = [SysSchema].[Id] AND [SysSchema].[ExtendParent] = 0)                    OR [SysSchemaProperty].[SysSchemaId] = [DerivedSysSchema].[Id])                    AND [SysSchemaProperty].[Name] = 'AdministratedByOperations'                    AND [SysSchemaProperty].[Value] = 'True'                    AND [SysSchemaProperty].[SysSchemaId] IS NOT NULL                )            THEN 1 ELSE 0 END) AS [AdministratedByOperations],            (CASE WHEN EXISTS (                SELECT 1                FROM [SysSchemaProperty]                WHERE (([SysSchemaProperty].[SysSchemaId] = [SysSchema].[Id] AND [SysSchema].[ExtendParent] = 0)                    OR [SysSchemaProperty].[SysSchemaId] = [DerivedSysSchema].[Id])                    AND [SysSchemaProperty].[Name] = 'AdministratedByColumns'                    AND [SysSchemaProperty].[Value] = 'True'                    AND [SysSchemaProperty].[SysSchemaId] IS NOT NULL                )            THEN 1 ELSE 0 END) AS [AdministratedByColumns],            (CASE WHEN EXISTS (                SELECT 1                FROM [SysSchemaProperty]                WHERE (([SysSchemaProperty].[SysSchemaId] = [SysSchema].[Id] AND [SysSchema].[ExtendParent] = 0)                    OR [SysSchemaProperty].[SysSchemaId] = [DerivedSysSchema].[Id])                    AND [SysSchemaProperty].[Name] = 'AdministratedByRecords'                    AND [SysSchemaProperty].[Value] = 'True'                    AND [SysSchemaProperty].[SysSchemaId] IS NOT NULL                )            THEN 1 ELSE 0 END) AS [AdministratedByRecords],            (CASE WHEN EXISTS (                SELECT 1                FROM [SysSchemaProperty]                WHERE (([SysSchemaProperty].[SysSchemaId] = [SysSchema].[Id] AND [SysSchema].[ExtendParent] = 0)                    OR [SysSchemaProperty].[SysSchemaId] = [DerivedSysSchema].[Id])                    AND [SysSchemaProperty].[Name] = 'IsTrackChangesInDB'                    AND [SysSchemaProperty].[Value] = 'True'                    AND [SysSchemaProperty].[SysSchemaId] IS NOT NULL                )            THEN 1 ELSE 0 END) AS [IsTrackChangesInDB]    FROM [SysSchema]    LEFT OUTER JOIN [SysSchema] AS [DerivedSysSchema] ON ([SysSchema].[Id] = [DerivedSysSchema].[ParentId] AND [DerivedSysSchema].[ExtendParent] = 1)    WHERE [SysSchema].[ManagerName] = 'EntitySchemaManager'        AND [SysSchema].[ExtendParent] = 0) AS [AdministrationPropertiesAll]GROUP BY [AdministrationPropertiesAll].[Id])SELECT [BaseSchemas].[UId] AS [Id],    [BaseSchemas].[UId],    [BaseSchemas].[CreatedOn],    [BaseSchemas].[CreatedById],    [BaseSchemas].[ModifiedOn],    [BaseSchemas].[ModifiedById],    [BaseSchemas].[Name],    [VwSysSchemaExtending].[TopExtendingCaption] as Caption,    [BaseSchemas].[Description],    (CASE WHEN EXISTS (        SELECT 1        FROM [SysLookup]        WHERE [SysLookup].[SysEntitySchemaUId] = [BaseSchemas].[UId])        THEN 1 ELSE 0 END) AS [IsLookup],    (CASE WHEN EXISTS (        SELECT 1 FROM [SysModule]        INNER JOIN [SysModuleEntity] ON [SysModuleEntity].[Id] = [SysModule].[SysModuleEntityId]        WHERE [BaseSchemas].[UId] = [SysModuleEntity].[SysEntitySchemaUId])        THEN 1 ELSE 0 END) AS [IsModule],    [SysSchemaAdministrationProperties].[AdministratedByOperations],    [SysSchemaAdministrationProperties].[AdministratedByColumns],    [SysSchemaAdministrationProperties].[AdministratedByRecords],    [SysSchemaAdministrationProperties].[IsTrackChangesInDB],    [SysWorkspaceId],    [BaseSchemas].[ProcessListeners],    (CASE WHEN EXISTS (        SELECT 1        FROM [SysSSPEntitySchemaAccessList]        WHERE [SysSSPEntitySchemaAccessList].[EntitySchemaUId] = [BaseSchemas].[UId]        )        THEN 1 ELSE 0 END) AS [IsInSSPEntitySchemaAccessList]FROM  [SysSchema] as [BaseSchemas]INNER JOIN [VwSysSchemaExtending] ON BaseSchemas.[Id] = [VwSysSchemaExtending].[BaseSchemaId]INNER JOIN [SysPackage] on [BaseSchemas].[SysPackageId] = [SysPackage].[Id]INNER JOIN [SysSchemaAdministrationProperties] ON [BaseSchemas].[Id] = [SysSchemaAdministrationProperties].[SysSchemaId]GOCREATE TRIGGER [dbo].[TRVwAdministrativeObjects_IU]ON [dbo].[VwAdministrativeObjects]    INSTEAD OF UPDATEASBEGIN    SET NOCOUNT ON;    RETURNENDGO