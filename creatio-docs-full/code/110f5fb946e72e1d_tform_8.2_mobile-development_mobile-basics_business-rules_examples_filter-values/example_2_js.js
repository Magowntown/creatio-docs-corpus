Terrasoft.sdk.Model.addBusinessRule("Activity", {    name: "ActivityResultByAllowedResultFilterRule",    position: 1,    ruleType: Terrasoft.RuleTypes.Custom,    triggeredByColumns: ["Result"],    events: [Terrasoft.BusinessRuleEvents.ValueChanged, Terrasoft.BusinessRuleEvents.Load],    executeFn: function(record, rule, column, customData, callbackConfig) {        var allowedResult = record.get("AllowedResult");        var filterName = "ActivityResultByAllowedResultFilter";        if (!Ext.isEmpty(allowedResult)) {            var allowedResultIds =  Ext.JSON.decode(allowedResult, true);            var resultIdsAreCorrect = true;            for (var i = 0, ln = allowedResultIds.length; i < ln; i++) {                var item = allowedResultIds[i];                if (!Terrasoft.util.isGuid(item)) {                    resultIdsAreCorrect = false;                    break;                }            }            if (resultIdsAreCorrect) {                var filter = Ext.create("Terrasoft.Filter", {                    name: filterName,                    property: "Id",                    funcType: Terrasoft.FilterFunctions.In,                    funcArgs: allowedResultIds                });                record.changeProperty("Result", {                    addFilter: filter                });            } else {                record.changeProperty("Result", {                    removeFilter: filterName                });            }        } else {            record.changeProperty("Result", {                removeFilter: filterName            });        }        Ext.callback(callbackConfig.success, callbackConfig.scope, [true]);    }});