/* Declare the AMD module. */define("UsrRequests_FormPage", /**SCHEMA_DEPS*/["@creatio-devkit/common"]/**SCHEMA_DEPS*/, function/**SCHEMA_ARGS*/(sdk)/**SCHEMA_ARGS*/ {    return {        viewConfigDiff: /**SCHEMA_VIEW_CONFIG_DIFF*/[            {                "operation": "merge",                "name": "Feed",                "values": {                    "dataSourceName": "PDS",                    "entitySchemaName": "UsrRequests"                }            },            {                "operation": "merge",                "name": "AttachmentList",                "values": {                    "columns": [                        {                            "id": "4c7274a8-9635-4926-86f0-8445ef7975c0",                            "code": "AttachmentListDS_Name",                            "caption": "#ResourceString(AttachmentListDS_Name)#",                            "dataValueType": 28,                            "width": 200                        }                    ]                }            },            {                "operation": "insert",                "name": "UsrName",                "values": {                    "layoutConfig": {                        "column": 1,                        "row": 1,                        "colSpan": 1,                        "rowSpan": 1                    },                    "type": "crt.Input",                    "label": "$Resources.Strings.UsrName",                    "control": "$UsrName",                    "labelPosition": "auto"                },                "parentName": "SideAreaProfileContainer",                "propertyName": "items",                "index": 0            },            /* Label of the current contact name. */            {                "operation": "insert",                "name": "UsrCurrentUser",                "values": {                    "layoutConfig": {                        "column": 1,                        "row": 2,                        "colSpan": 1,                        "rowSpan": 1                    },                    "type": "crt.Label",                    "caption": "#MacrosTemplateString(#ResourceString(UsrCurrentUser_caption)#)#",                    "labelType": "caption",                    "labelThickness": "default",                    "labelEllipsis": false,                    "labelColor": "#757575",                    "labelBackgroundColor": "transparent",                    "labelTextAlign": "start",                    "visible": true                },                "parentName": "SideAreaProfileContainer",                "propertyName": "items",                "index": 1            },            /* Label that contains the value of the current contact name from the system variable. */            {                "operation": "insert",                "name": "UsrCurrentUserValue",                "values": {                    "layoutConfig": {                        "column": 1,                        "row": 3,                        "colSpan": 1,                        "rowSpan": 1                    },                    "type": "crt.Label",                    /* The property that handles the text contained in the element. Bound to the "CurrentUser" attribute. */                    "caption": "$CurrentUser",                    "labelType": "body",                    "labelThickness": "default",                    "labelEllipsis": false,                    "labelColor": "auto",                    "labelBackgroundColor": "transparent",                    "labelTextAlign": "start",                    "visible": true                },                "parentName": "SideAreaProfileContainer",                "propertyName": "items",                "index": 2            },            /* Label of the time offset from UTC. */            {                "operation": "insert",                "name": "UsrContactTimeOffset",                "values": {                    "layoutConfig": {                        "column": 1,                        "colSpan": 1,                        "rowSpan": 1,                        "row": 4                    },                    "type": "crt.Label",                    "caption": "#MacrosTemplateString(#ResourceString(UsrContactTimeOffset_caption)#)#",                    "labelType": "caption",                    "labelThickness": "default",                    "labelEllipsis": false,                    "labelColor": "#757575",                    "labelBackgroundColor": "transparent",                    "labelTextAlign": "start",                    "visible": true                },                "parentName": "SideAreaProfileContainer",                "propertyName": "items",                "index": 3            },            /* Label that contains the value of the time offset from UTC from the system variable. */            {                "operation": "insert",                "name": "UsrContactTimeOffsetValue",                "values": {                    "layoutConfig": {                        "column": 1,                        "colSpan": 1,                        "rowSpan": 1,                        "row": 5                    },                    "type": "crt.Label",                    /* The property that handles the text contained in the element. Bound to the "ContactTimezone" attribute. */                    "caption": "$ContactTimezone",                    "labelType": "body",                    "labelThickness": "default",                    "labelEllipsis": false,                    "labelColor": "auto",                    "labelBackgroundColor": "transparent",                    "labelTextAlign": "start",                    "visible": true                },                "parentName": "SideAreaProfileContainer",                "propertyName": "items",                "index": 4            }        ]/**SCHEMA_VIEW_CONFIG_DIFF*/,        viewModelConfigDiff: /**SCHEMA_VIEW_MODEL_CONFIG_DIFF*/[            {                "operation": "merge",                "path": [                    "attributes"                ],                "values": {                    "UsrName": {                        "modelConfig": {                            "path": "PDS.UsrName"                        }                    },                    /* The attribute that stores data of the current contact name. */                    "CurrentUser": {},                    /* The attribute that stores data of the time offset in hours between the time zone of the current contact and UTC. */                    "ContactTimezone": {},                }            },            {                "operation": "merge",                "path": [                    "attributes",                    "Id",                    "modelConfig"                ],                "values": {                    "path": "PDS.Id"                }            }        ]/**SCHEMA_VIEW_MODEL_CONFIG_DIFF*/,        modelConfigDiff: /**SCHEMA_MODEL_CONFIG_DIFF*/[            {                "operation": "merge",                "path": [],                "values": {                    "primaryDataSourceName": "PDS"                }            },            {                "operation": "merge",                "path": [                    "dataSources"                ],                "values": {                    "PDS": {                        "type": "crt.EntityDataSource",                        "config": {                            "entitySchemaName": "UsrRequests"                        },                        "scope": "page"                    }                }            }        ]/**SCHEMA_MODEL_CONFIG_DIFF*/,        handlers: /**SCHEMA_HANDLERS*/[            {                request: "crt.HandleViewModelInitRequest",                /* The custom implementation of the system request handler. */                handler: async (request, next) => {                    /* Create an instance of the system value service from "@creatio-devkit/common." */                    const sysValuesService = new sdk.SysValuesService();                    /* Upload the system variable values. */                    const sysValues = await sysValuesService.loadSysValues();                    /* Retrieve the name of the current contact and specify the name in the "CurrentUser" attribute. */                    request.$context.CurrentUser = sysValues.userContact.displayValue;                    const offset = sysValues.userTimezoneOffset;                    /* Convert the time zone offset value from minutes to hours. */                    const offsetDisplayValue = (offset > 0 ? '+' : '') + (offset / 60) + 'h';                    /* Specify the converted value of the time zone offset in the "ContactTimezone" attribute. */                    request.$context.ContactTimezone = offsetDisplayValue;                    /* Call the next handler if it exists and return its result. */                    return next?.handle(request);                },            },        ]/**SCHEMA_HANDLERS*/,        converters: /**SCHEMA_CONVERTERS*/{}/**SCHEMA_CONVERTERS*/,        validators: /**SCHEMA_VALIDATORS*/{}/**SCHEMA_VALIDATORS*/    };});