namespace Terrasoft.Configuration{    using System;    using System.Collections.Generic;    using Terrasoft.Common;    using Terrasoft.Core;    using Terrasoft.Core.Campaign;    using Terrasoft.Core.Process;    /* Define the campaign schema element (metadata) for the custom campaign element.    This class describes the element in the campaign schema and handles metadata persistence. */    [DesignModeProperty(        Name = "PhoneNumber",        UsageType = DesignModeUsageType.NotVisible,        MetaPropertyName = PhoneNumberPropertyName    )]    [DesignModeProperty(        Name = "SmsText",        UsageType = DesignModeUsageType.NotVisible,        MetaPropertyName = SmsTextPropertyName    )]    public class UsrSmsElement : CampaignSchemaElement    {        /* Constants for property names used in metadata serialization. */        private const string PhoneNumberPropertyName = "PhoneNumber";        private const string SmsTextPropertyName = "SmsText";        public UsrSmsElement() {            ElementType = CampaignSchemaElementType.AsyncTask;        }        /* Default constructor: defines the element type as an async task. */        public UsrSmsElement(UsrSmsElement source) : this(source, null, null) {        }        /* Copy constructors for cloning the element in schema operations. */        public UsrSmsElement(            UsrSmsElement source,            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema        ) : base(source, dictToRebind, parentSchema) {            ElementType = source.ElementType;            PhoneNumber = source.PhoneNumber;            SmsText = source.SmsText;        }        /* Define the campaign log action type associated with this element. */        protected override Guid Action {            get {                return CampaignConsts.CampaignLogTypeMailing;            }        }        [MetaTypeProperty("{A67950E7-FFD7-483D-9E67-3C9A30A733C0}")]        /* Assign the "PhoneNumber" attribute value in the class. */        public string PhoneNumber {            get;            set;        }        [MetaTypeProperty("{05F86DF2-B9FB-4487-B7BE-F3955703527C}")]        /* Assign the "SmsText" attribute value in the class. */        public string SmsText {            get;            set;        }        /* Read element metadata from the schema definition during deserialization. */        protected override void ApplyMetaDataValue(DataReader reader) {            base.ApplyMetaDataValue(reader);            switch (reader.CurrentName) {                case PhoneNumberPropertyName:                    PhoneNumber = reader.GetValue<string>();                    break;                case SmsTextPropertyName:                    SmsText = reader.GetValue<string>();                    break;            }        }        /* Write element metadata to the schema definition during serialization. */        public override void WriteMetaData(DataWriter writer) {            base.WriteMetaData(writer);            writer.WriteValue(PhoneNumberPropertyName, PhoneNumber, string.Empty);            writer.WriteValue(SmsTextPropertyName, SmsText, string.Empty);        }        /* Create a clone of the schema element. */        public override object Clone() {            return new UsrSmsElement(this);        }        /* Create a copy of the element using rebind support for schema references. */        public override object Copy(            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema        ) {            return new UsrSmsElement(this, dictToRebind, parentSchema);        }        /* Create the runtime process flow element that will be executed in the campaign.        Pass metadata values to the executable process element. */        public override ProcessFlowElement CreateProcessFlowElement(            UserConnection userConnection        ) {            var executableElement = new UsrSmsCampaignProcessElement {                UserConnection = userConnection,                SmsText = SmsText,                PhoneNumber = PhoneNumber            };            InitializeCampaignProcessFlowElement(executableElement);            return executableElement;        }    }}