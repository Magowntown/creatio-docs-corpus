namespace Terrasoft.Configuration{    using System;    using Terrasoft.Core;    using Terrasoft.Core.Entities;    public class ContactInUsrTestLanguageRule : BaseLanguageRule    {        public ContactInUsrTestLanguageRule (UserConnection userConnection) : base(userConnection)         {        }        // Defines the user preferred language identifier.         // recId â€“ current record identifier.        public override Guid GetLanguageId(Guid recId)        {            // Creating the EntitySchemaQuery instance for the custom section primary object.            var esq = new EntitySchemaQuery(UserConnection.EntitySchemaManager, "UsrMLangEmailTpl");            // Defining the contact language column name.            var languageColumnName = esq.AddColumn("UsrContact.Language.Id").Name;            // Obtaining current record instance.            Entity usrRecEntity = esq.GetEntity(UserConnection, recId);            // Obtaining the value of user preferred language identifier.             Guid languageId = usrRecEntity.GetTypedColumnValue<Guid>(languageColumnName);            return languageId;        }    }}