namespace Terrasoft.Configuration {    using System;    using System.Collections.Generic;    using Terrasoft.Core;    using Terrasoft.Core.Entities;    public class FillDeliveryType: IInstallScriptExecutor {        public void Execute(UserConnection userConnection) {            /* Create an ESQ that contains the [Id] column of the product and [Name] column from the [OrderProduct] database table. */            EntitySchemaQuery esqResult = new EntitySchemaQuery(userConnection.EntitySchemaManager, "OrderProduct");            EntitySchemaQueryColumn orderIdColumn = esqResult.AddColumn("Order.Id");            EntitySchemaQueryColumn productCategoryColumn = esqResult.AddColumn("Product.Category.Name");            /* Implement pagination. */            var options = new EntitySchemaQueryOptions {                PageableDirection = Core.DB.PageableSelectDirection.First,                    RowsOffset = 0,                    PageableRowCount = userConnection.AppConnection.MaxEntityRowCount,                    PageableConditionValues = new Dictionary <string, object> ()            };            /* Retrieve the collection of the orders. */            EntityCollection productsInOrder = esqResult.GetEntityCollection(userConnection, options);            EntitySchemaManager entitySchemaManager = userConnection.EntitySchemaManager;            Entity orderEntity = entitySchemaManager.GetEntityByName("Order", userConnection);            /* The first page. */            EditOrders(productsInOrder, orderIdColumn, productCategoryColumn, orderEntity);            int rowsRead = productsInOrder.Count;            /* Use the pagination. */            while (productsInOrder.Count > 0) {                options.RowsOffset = rowsRead;                /* Scroll forward. */                options.PageableDirection = Core.DB.PageableSelectDirection.Next;                /* Retrieve next page. */                esqResult.ResetSelectQuery();                productsInOrder = esqResult.GetEntityCollection(userConnection, options);                rowsRead += productsInOrder.Count;                EditOrders(productsInOrder, orderIdColumn, productCategoryColumn, orderEntity);            }        }        private void EditOrders(EntityCollection productsInOrder, EntitySchemaQueryColumn orderIdColumn,            EntitySchemaQueryColumn productCategoryColumn, Entity orderEntity) {            /* Implement the modifying logic. */        }    }}