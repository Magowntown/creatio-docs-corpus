{
  "url": "https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/marketing-campaigns-basics/examples/implement-a-campaign-element-flow",
  "title": "Implement a custom flow for a campaign element",
  "breadcrumbs": [
    {
      "text": "Platform customization",
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/platform-customization"
    },
    {
      "text": "Freedom UI",
      "href": "/docs/8.x/dev/development-on-creatio-platform/freedom-ui-customization"
    },
    {
      "text": "Marketing campaigns",
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/marketing-campaigns"
    },
    {
      "text": "Examples",
      "href": "/docs/8.x/dev/development-on-creatio-platform/campaigns-examples"
    }
  ],
  "content_markdown": "Version: 8.3\nOn this page\nLevel: advanced\nTo implement the example:\n1. Implement a custom campaign element. Read more >>>\n2. Create a schema for the campaign element flow. Read more >>>\n3. Create a property panel for the campaign element flow. Read more >>>\n4. Create an executable element for the campaign element flow. Read more >>>\n5. Implement the business logic of the campaign element flow. Read more >>>\n6. Extend campaign connector manager. Read more >>>\n7. Connect the business logic of the campaign element flow. Read more >>>\nExample\nCreate a custom conditional flow for the custom **SMS** campaign element. The flow must execute the following actions:\n* Omit the responses to the bulk SMS.\n![](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result.png)\n* Handle delivered SMS responses and SMS responses whose receiving ends with error.\n![](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_1.png)\n* Receive SMS responses, regardless of their value.\n![](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_2.png)\n## 1\\. Implement a custom campaign element\u200b\nInstructions: [Implement a custom campaign element](https://academy.creatio.com/documents?ver=8.3&id=15712).\n## 2\\. Create a schema for the campaign element flow\u200b\n### 1\\. Create the SMS sending status lookup\u200b\n1. **Open the Configuration section**. Instructions: [Open the **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15101&anchor=title-2093-2).\n2. **Create a** `sdkCustomCampaignElementFlow` **package**. Instructions: [Create a user-made package using **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15122).\n3. **Change the current package** to `sdkCustomCampaignElementFlow`. Instructions: [Change the current package](https://academy.creatio.com/documents?ver=8.3&id=15072&anchor=change-the-current-package).\n4. **Click Add** \u2192 **Object**.\n5. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nGeneral property block  \nCode| UsrSmsSendingStatus  \nTitle| SMS sending status  \nInheritance property block  \nParent object| BaseLookup  \n6. **Click Save and publish**.\n7. **Register the lookup**.\n1. Click ![](https://academy.creatio.com/sites/en/files/images/NoCodePlatform/Manage_Apps/btn_system_designer_8_shell.png) in the top right \u2192 **System setup** \u2192 **Lookups**.\n2. Create a lookup.\n1. Click **New lookup**.\n2. Fill out the lookup properties.\nProperty| Property value  \n---|---  \nName| SMS sending status  \nObject| SMS sending status  \n3. Click **Save**.\n3. Fill out the lookup.\nFor this example, add the following lookup values:\n* Delivered\n* Canceled\n* Error while receiving\n### 2\\. Create SMS recipient object\u200b\n1. **Open the Configuration section**. Instructions: [Open the **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15101&anchor=title-2093-2).\n2. **Select the** `sdkCustomCampaignElementFlow` **package**.\n3. **Click Add** \u2192 **Object**.\n4. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nGeneral property block  \nCode| UsrSmsRecipient  \nTitle| Sms recipient  \nInheritance property block  \nParent object| BaseEntity  \n5. **Add columns**.\nFor this example, add the following columns:\n* column that contains the phone number\n* column that contains the SMS text\n* column that contains the SMS receiver\n* column that contains the SMS sending status\nTo do this:\n1. Go to the **Columns** node's context menu.\n2. Click ![](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/icons/8.2/scr_add_button_in_schema.png) \u2192 select column type \u2192 fill out the column properties.\nColumn| Column type| Property| Property value  \n---|---|---|---  \nColumn that contains the phone number| Text (50 characters)| Code| UsrPhoneNumber  \nTitle| Phone  \nColumn that contains the SMS text| Text (50 characters)| Code| UsrSmsText  \nTitle| SMS text  \nColumn that contains the SMS receiver| Lookup| Code| UsrContactLookup  \nTitle| Contact  \nLookup| Contact  \nColumn that contains the SMS sending status| Lookup| Code| UsrSmsSendingStatusLookup  \nTitle| SMS sending status  \nLookup| UsrSmsSendingStatus  \n6. **Click Save and publish**.\n### 3\\. Create SMS responses object\u200b\n1. **Click Add** \u2192 **Object**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nGeneral property block  \nCode| UsrSmsResponses  \nTitle| SMS responses  \nInheritance property block  \nParent object| BaseEntity  \n3. **Add columns**.\nFor this example, add the column that contains the SMS response. To do this:\n1. Go to the **Columns** node's context menu.\n2. Click ![](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/icons/8.2/scr_add_button_in_schema.png) \u2192 select column type \u2192 fill out the column properties.\nColumn| Column type| Property| Property value  \n---|---|---|---  \nColumn that contains the SMS response| Text (50 characters)| Code| UsrResponse  \nTitle| Response  \n4. **Click Save and publish**.\n### 4\\. Create a flow for a campaign element\u200b\n1. **Click Add** \u2192 **Module**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nCode| UsrProcessSmsConditionalTransitionSchema  \nTitle| Element conditional transition schema  \n3. **Add source code** that implements the flow conditions.\nUsrProcessSmsConditionalTransitionSchema\ndefine(\"UsrProcessSmsConditionalTransitionSchema\", [\"CampaignEnums\",  \n\"UsrProcessSmsConditionalTransitionSchemaResources\",  \n\"ProcessCampaignConditionalSequenceFlowSchema\"], function(CampaignEnums) {  \nExt.define(\"Terrasoft.manager.UsrProcessSmsConditionalTransitionSchema\", {  \n/* Parent schema. */  \nextend: \"Terrasoft.ProcessCampaignConditionalSequenceFlowSchema\",  \n/* Alternative class name. */  \nalternateClassName: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\",  \n/* ID of the new campaign element. */  \nmanagerItemUId: \"4b5e70b0-a631-458e-ab22-856ddc913444\",  \n/* Mixins that extend functionality. */  \nmixins: {  \nparametrizedProcessSchemaElement: \"Terrasoft.ParametrizedProcessSchemaElement\"  \n},  \n/* Full name of the class that implements the campaign element logic.  \nThis class saves and reads\u00a0the element properties from the schema  \nproperties. Since the class is placed in the regular package, use the  \n\"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,  \nTerrasoft.Configuration\" typeName. If the class is placed in the  \nassembly package, use  \ntypeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,  \nSomeAssemblyPackageName\" */  \ntypeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,\" +  \n\"Terrasoft.Configuration\",  \n/* Arrow element name used for linking campaign elements. */  \nconnectionUserHandleName: \"SmsConditionalTransition\",  \n/* Schema name of the edit page. */  \neditPageSchemaName: \"UsrSmsConditionalTransitionPropertiesPanel\",  \n/* Element type. */  \nelementType: CampaignEnums.CampaignSchemaElementTypes.CONDITIONAL_TRANSITION,  \n/* ID of the SMS response option linked to the transition. */  \nsmsResponseId: null,  \n/* Define whether the transition is based on a specific SMS  \nresponse condition. */  \nisResponseBasedStart: false,  \n/* Expand the properties for serialization. */  \ngetSerializableProperties: function() {  \nvar baseSerializableProperties = this.callParent(arguments);  \nExt.Array.push(baseSerializableProperties, [\"smsResponseId\",  \n\"isResponseBasedStart\"]);  \nreturn baseSerializableProperties;  \n}  \n});  \nreturn Terrasoft.UsrProcessSmsConditionalTransitionSchema;  \n}  \n);  \n4. **Click Save**.\n### 5\\. Add the campaign element frow to the Campaign Designer\u200b\n1. **Click Add** \u2192 **Replacing view model**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nParent object| CampaignElementSchemaManagerEx  \n3. **Add the source code**.\nCampaignElementSchemaManagerEx\nrequire([\"CampaignElementSchemaManager\", \"UsrProcessSmsConditionalTransitionSchema\"],  \nfunction() {  \n/* Register the \"UsrProcessSmsConditionalTransitionSchema\" in the Campaign Designer. */  \nvar coreElementClassNames = Terrasoft.CampaignElementSchemaManager.coreElementClassNames;  \n/* Add the custom schema to the list of available schemas. */  \ncoreElementClassNames.push({  \nitemType: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"  \n});  \n}  \n);  \n4. **Click Save**.\n## 3\\. Create a property panel for the campaign element flow\u200b\n1. **Click Add** \u2192 **Page view model**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nCode| UsrSmsConditionalTransitionPropertiesPanel  \nTitle| Properties panel for the custom flow  \nParent object| CampaignConditionalSequenceFlowPropertiesPage  \n3. **Add the localizable strings** that include the field names.\n1. Create a localizable string. Instructions: [Add a localizable string](https://academy.creatio.com/documents?ver=8.3&id=15272&anchor=title-2174-3).\n2. Fill out the localizable string parameters.\nCode| Value  \n---|---  \nReactionModeCaption| What is the result of the {0} step?  \nReactionModeDefault| Transfer participants regardless of their response  \nReactionModeWithCondition| Set up responses for transferring participants  \nIsSmsDelivered| SMS is delivered  \nIsErrorWhileReceiving| Error while receiving  \n4. **Implement the business logic** of the campaign element flow.\nUsrSmsConditionalTransitionPropertiesPanel\ndefine(\"UsrSmsConditionalTransitionPropertiesPanel\", [\"BusinessRuleModule\",  \n\"LookupUtilities\"], function(BusinessRuleModule, LookupUtilities) {  \nreturn {  \nmessages: {},  \n/* Schema attributes. */  \nattributes: {  \n/* Attribute that stores data about list of participants. */  \n\"ReactionModeEnum\": {  \ndataValueType: this.Terrasoft.DataValueType.CUSTOM_OBJECT,  \ntype: this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,  \nvalue: {  \nDefault: {  \nvalue: \"0\",  \ncaptionName: \"Resources.Strings.ReactionModeDefault\"  \n},  \nWithCondition: {  \nvalue: \"1\",  \ncaptionName: \"Resources.Strings.ReactionModeWithCondition\"  \n}  \n}  \n},  \n/* Attribute that stores data about participants' responses. */  \n\"ReactionMode\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.LOOKUP,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,  \n\"isRequired\": true  \n},  \n/* Attribute that stores data about SMS delivery status. */  \n\"IsSmsDelivered\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN  \n},  \n/* Attribute that stores data about error occurred while  \nreceiving SMS. */  \n\"IsErrorWhileReceiving\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN  \n}  \n},  \n/* Schema business rules. */  \nrules: {  \n/* Make the \"ReactionConditionDecision\" business rule  \nrequired when the \"ReactionMode\" attribute is equal \"1.\" */  \n\"ReactionConditionDecision\": {  \n\"BindReactionConditionDecisionRequiredToReactionMode\": {  \n\"ruleType\": BusinessRuleModule.enums.RuleType.BINDPARAMETER,  \n\"property\": BusinessRuleModule.enums.Property.REQUIRED,  \n\"conditions\": [{  \n\"leftExpression\": {  \n\"type\": BusinessRuleModule.enums.ValueType.ATTRIBUTE,  \n\"attribute\": \"ReactionMode\"  \n},  \n\"comparisonType\": this.Terrasoft.ComparisonType.EQUAL,  \n\"rightExpression\": {  \n\"type\": BusinessRuleModule.enums.ValueType.CONSTANT,  \n\"value\": \"1\"  \n}  \n}]  \n}  \n}  \n},  \n/* Schema methods. */  \nmethods: {  \n/* Return mapping of attributes to the \"SMS response  \ntype\" (\"SmsResponseType\" code) lookup records. */  \ngetResponseConfig: function() {  \nreturn {  \n\"IsSmsDelivered\": \"5a9f08a4-c7f2-4dc8-9940-13ba1b2762cf\",  \n\"IsErrorWhileReceiving\": \"4a790626-bfbb-4ca7-a9f2-595000262561\"  \n};  \n},  \n/* Bind the handler to the event that changes the \"ReactionMode\"  \nattribute value. */  \nsubscribeEvents: function() {  \nthis.callParent(arguments);  \n/* Subscribe to changes of the \"ReactionMode\" attribute  \nvalue. */  \nthis.on(  \n\"change:ReactionMode\",  \nthis.onReactionModeLookupChanged,  \nthis  \n);  \n},  \n/* Handle the ReactionMode attribute change event. */  \nonReactionModeLookupChanged: function() {  \nvar reactionModeEnum = this.get(\"ReactionModeEnum\");  \nvar reactionMode = this.get(\"ReactionMode\");  \nvar decisionModeEnabled =(reactionMode &&  \nreactionMode.value === reactionModeEnum.WithCondition.value);  \nif (!decisionModeEnabled) {  \nthis.set(\"ReactionConditionDecision\", null);  \n}  \n},  \n/* Initialize attributes for displaying the page when opened. */  \ninitParameters: function(element) {  \nthis.callParent(arguments);  \nvar isResponseBasedStart = element.isResponseBasedStart;  \nthis.initReactionMode(isResponseBasedStart);  \nthis.initSmsResponses(element.smsResponseId);  \n},  \n/* Cut the string to the specified length and append an  \nellipsis at the end. Auxiliary method. */  \ncutString: function(strValue, strLength) {  \nvar ellipsis = Ext.String.ellipsis(  \nstrValue.substring(strLength),  \n0  \n);  \nreturn strValue.substring(0, strLength) + ellipsis;  \n},  \n/* Set the status value to \"Delivered.\" */  \ninitIsSmsDelivered: function(value) {  \nif (value === undefined) {  \nvalue = this.get(\"IsSmsDelivered\");  \n}  \nthis.set(\"IsSmsDelivered\", value);  \n},  \n/* Set the status value to \"Error while receiving.\" */  \ninitIsErrorWhileReceiving: function(value) {  \nif (value === undefined) {  \nvar isErrorWhileReceiving = this.get(\"IsErrorWhileReceiving\");  \nvalue = isErrorWhileReceiving;  \n}  \nthis.set(\"IsErrorWhileReceiving\", value);  \n},  \n/* Initialize the selected responses when opening the page. */  \ninitSmsResponses: function(responseIdsJson) {  \nif (!responseIdsJson) {  \nreturn;  \n}  \nvar responseIds = JSON.parse(responseIdsJson);  \nvar config = this.getResponseConfig();  \nTerrasoft.each(config, function(propValue, propName) {  \nif (responseIds.indexOf(propValue) > -1) {  \nthis.set(propName, true);  \n}  \n}, this);  \n},  \n/* Initialize the \"ReactionMode\" attribute based on  \n\"isResponseBasedStart.\" */  \ninitReactionMode: function(value) {  \nvar isDefault = !value;  \nthis.setLookupValue(  \nisDefault,  \n\"ReactionMode\",  \n\"WithCondition\",  \nthis  \n);  \n},  \n/* Parse JSON array of IDs. Return \"[]\" on error. */  \ngetIds: function(idsJson) {  \nif (idsJson) {  \ntry {  \nvar ids = JSON.parse(idsJson);  \nif (this.Ext.isArray(ids)) {  \nreturn ids;  \n}  \n} catch (error) {  \nreturn [];  \n}  \n}  \nreturn [];  \n},  \n/* Populate \"ReactionMode\" attribute list from \"ReactionModeEnum\". */  \nonPrepareReactionModeList: function(filter, list) {  \nthis.prepareList(\"ReactionModeEnum\", list, this);  \n},  \n/* Save UI values back to the process element before save. */  \nsaveValues: function() {  \nthis.callParent(arguments);  \nvar element = this.get(\"ProcessElement\");  \nvar isResponseBasedStart = this.getIsReactionModeWithConditions();  \nelement.isResponseBasedStart = isResponseBasedStart;  \nelement.smsResponseId = this.getSmsResponseId(isResponseBasedStart);  \n},  \n/* Serialize selected response IDs to JSON.*/  \ngetSmsResponseId: function(isResponseActive) {  \nvar responseIds = [];  \nif (isResponseActive) {  \nvar config = this.getResponseConfig();  \nTerrasoft.each(config, function(propValue, propName) {  \nvar attrValue = this.get(propName);  \nif (attrValue && propValue) {  \nresponseIds.push(propValue);  \n}  \n}, this);  \n}  \nreturn JSON.stringify(responseIds);  \n},  \n/* Return lookup underlying ID or null. */  \ngetLookupValue: function(parameterName) {  \nvar value = this.get(parameterName);  \nreturn value ? value.value : null;  \n},  \n/* Help context code for the property page. */  \ngetContextHelpCode: function() {  \nreturn \"CampaignConditionalSequenceFlow\";  \n},  \n/* Return \"true\" if \"ReactionMode\" is set to \"1.\" */  \ngetIsReactionModeWithConditions: function() {  \nreturn this.isLookupValueEqual(\"ReactionMode\", \"1\", this);  \n},  \n/* Return source element of the transition if available. */  \ngetSourceElement: function() {  \nvar flowElement = this.get(\"ProcessElement\");  \nif (flowElement) {  \nreturn flowElement.findSourceElement();  \n}  \nreturn null;  \n},  \n/* Format question caption including the source element name. */  \ngetQuestionCaption: function() {  \nvar caption = this.get(\"Resources.Strings.ReactionModeCaption\");  \ncaption = this.Ext.String.format(  \ncaption,  \nthis.getSourceElement().getCaption()  \n);  \nreturn caption;  \n}  \n},  \n/* The schema view description. */  \ndiff: /**SCHEMA_DIFF*/[  \n/* Page container.*/  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"parentName\": \"ContentContainer\",  \n\"className\": \"Terrasoft.GridLayoutEdit\",  \n\"values\":  \n{  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 2,  \n\"colSpan\": 24  \n},  \n\"itemType\": this.Terrasoft.ViewItemType.GRID_LAYOUT,  \n\"items\": []  \n}  \n},  \n/* Title label. */  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionModeLabel\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"values\":  \n{  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 0,  \n\"colSpan\": 24  \n},  \n\"itemType\": this.Terrasoft.ViewItemType.LABEL,  \n\"caption\":  \n{  \n\"bindTo\": \"getQuestionCaption\"  \n},  \n\"classes\":  \n{  \n\"labelClass\": [\"t-title-label-proc\"]  \n}  \n}  \n},  \n/* \"ReactionMode\" list. */  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionMode\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"values\":  \n{  \n\"contentType\": this.Terrasoft.ContentType.ENUM,  \n\"controlConfig\":  \n{  \n\"prepareList\":  \n{  \n\"bindTo\": \"onPrepareReactionModeList\"  \n}  \n},  \n\"isRequired\": true,  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 1,  \n\"colSpan\": 24  \n},  \n\"labelConfig\":  \n{  \n\"visible\": false  \n},  \n\"wrapClass\": [\"no-caption-control\"]  \n}  \n},  \n/* \"IsSmsDelivered\" checkbox.*/  \n{  \n\"operation\": \"insert\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"name\": \"IsSmsDelivered\",  \n\"values\":  \n{  \n\"wrapClass\": [\"t-checkbox-control\"],  \n\"visible\":  \n{  \n\"bindTo\": \"ReactionMode\",  \n\"bindConfig\":  \n{  \nconverter: \"getIsReactionModeWithConditions\"  \n}  \n},  \n\"caption\":  \n{  \n\"bindTo\": \"Resources.Strings.IsSmsDelivered\"  \n},  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 2,  \n\"colSpan\": 22  \n}  \n}  \n},  \n/* \"IsErrorWhileReceiving\" checkbox.*/  \n{  \n\"operation\": \"insert\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"name\": \"IsErrorWhileReceiving\",  \n\"values\":  \n{  \n\"wrapClass\": [\"t-checkbox-control\"],  \n\"visible\":  \n{  \n\"bindTo\": \"ReactionMode\",  \n\"bindConfig\":  \n{  \nconverter: \"getIsReactionModeWithConditions\"  \n}  \n},  \n\"caption\":  \n{  \n\"bindTo\": \"Resources.Strings.IsErrorWhileReceiving\"  \n},  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 3,  \n\"colSpan\": 22  \n}  \n}  \n}  \n]/**SCHEMA_DIFF*/  \n};  \n}  \n);  \n5. **Click Save**.\n## 4\\. Create an executable element for the campaign element flow\u200b\n1. **Click Add** \u2192 **Source code**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nCode| UsrSmsConditionalTransitionFlowElement  \nTitle| Conditional transition of the SMS process element  \n3. **Implement an executable element** that collects responses of the bulk SMS.\n1. Specify the `ConditionalTransitionFlowElement` class as a parent class.\n2. Override the `CreateQuery()` method.\nUsrSmsConditionalTransitionFlowElement\nnamespace Terrasoft.Configuration  \n{  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing Terrasoft.Common;  \nusing Terrasoft.Core.DB;  \n/* Define a custom element flow. */  \npublic class UsrSmsConditionalTransitionFlowElement  \n: ConditionalTransitionFlowElement  \n{  \n/* Assign the \"SmsText\" attribute value in the class. */  \npublic string SmsText {  \nget;  \nset;  \n}  \n/* Assign the \"PhoneNumber\" attribute value in the class. */  \npublic string PhoneNumber {  \nget;  \nset;  \n}  \n/* Assign the collection of SMS response IDs in the class. */  \npublic IEnumerable<Guid> SmsResponses {  \nget;  \nset;  \n}  \n/* Extend the base \"TransitionQuery\" with participant responses  \nfilter. */  \nprivate void ExtendWithResponses() {  \nTransitionQuery.CheckArgumentNull(\"TransitionQuery\");  \nif (SmsResponses.Any()) {  \nQuery responseSelect = GetSelectByParticipantResponses();  \nTransitionQuery.And(\"ContactId\").In(responseSelect);  \n}  \n}  \n/* Build a subquery selecting \"ContactId\" from \"UsrSmsRecipient\"  \nfiltered by \"SmsText,\" \"PhoneNumber,\" and \"SmsResponseId.\" */  \nprivate Query GetSelectByParticipantResponses() {  \nvar responseSelect = new Select(UserConnection)  \n.Column(\"ContactId\")  \n.From(\"UsrSmsRecipient\")  \n.Where(\"SmsText\").IsEqual(Column.Parameter(SmsText))  \n.And(\"PhoneNumber\").IsEqual(Column.Parameter(PhoneNumber))  \n.And(\"SmsResponseId\")  \n.In(Column.Parameters(SmsResponses)) as Select;  \nresponseSelect.SpecifyNoLockHints(true);  \nreturn responseSelect;  \n}  \n/* Extend base query with response filters. */  \nprotected override void CreateQuery() {  \nbase.CreateQuery();  \nExtendWithResponses();  \n}  \n}  \n}  \n4. **Click Save and publish**.\n## 5\\. Implement the business logic of the campaign element flow\u200b\n1. **Click Add** \u2192 **Source code**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nCode| UsrSmsConditionalTransitionElement  \nTitle| Transition the SMS element  \n3. **Specify the** `ConditionalSequenceFlowElement` **class as a parent class**.\n4. **Override the methods**.\n* `ApplyMetaDataValue(DataReader reader)`\n* `WriteMetaData(DataWriter writer)`\n* `Clone()`\n* `Copy(Dictionary<Guid, Guid> dictToRebind, Core.Campaign.CampaignSchema parentSchema)`\n* `CreateProcessFlowElement(UserConnection userConnection)`\nUsrSmsConditionalTransitionElement\nnamespace Terrasoft.Configuration  \n{  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Collections.ObjectModel;  \nusing System.Globalization;  \nusing System.Linq;  \nusing Newtonsoft.Json;  \nusing Terrasoft.Common;  \nusing Terrasoft.Core;  \nusing Terrasoft.Core.Campaign;  \nusing Terrasoft.Core.DB;  \nusing Terrasoft.Core.Process;  \n[DesignModeProperty(  \nName = \"SmsResponseId\",  \nUsageType = DesignModeUsageType.NotVisible,  \nMetaPropertyName = SmsResponseIdPropertyName)]  \n[DesignModeProperty(  \nName = \"IsResponseBasedStart\",  \nUsageType = DesignModeUsageType.Advanced,  \nMetaPropertyName = IsResponseBasedStartPropertyName)]  \npublic class UsrSmsConditionalTransitionElement  \n: ConditionalSequenceFlowElement  \n{  \n/* Constants for property names used in metadata serialization. */  \nprivate const string SmsResponseIdPropertyName = \"SmsResponseId\";  \nprivate const string IsResponseBasedStartPropertyName = \"IsResponseBasedStart\";  \n/* Default constructor. */  \npublic UsrSmsConditionalTransitionElement() {}  \n/* Copy constructor without rebind and schema. */  \npublic UsrSmsConditionalTransitionElement(  \nUsrSmsConditionalTransitionElement source)  \n: this(source, null, null)   \n{}  \n/* Copy constructors for cloning the element in schema operations. */  \npublic UsrSmsConditionalTransitionElement(  \nUsrSmsConditionalTransitionElement source,  \nDictionary<Guid, Guid> dictToRebind,  \nCore.Campaign.CampaignSchema parentSchema)  \n: base(source, dictToRebind, parentSchema) {  \nIsResponseBasedStart = source.IsResponseBasedStart;  \n_smsResponseIdJson = JsonConvert.SerializeObject(  \nsource.SmsResponseId  \n);  \n}  \n/* Store \"SmsResponseId\" in serialized JSON format. */  \nprivate string _smsResponseIdJson;  \n/* Internal helper property, return the collection of response IDs. */  \nprivate IEnumerable<Guid> Responses {  \nget {  \nreturn SmsResponseId;  \n}  \n}  \n/* Meta property that stores a collection of SMS response IDs. */  \n[MetaTypeProperty(\"{DC597899-B831-458A-A58E-FB43B1E266AC}\")]  \npublic IEnumerable<Guid> SmsResponseId {  \nget {  \nreturn !string.IsNullOrWhiteSpace(_smsResponseIdJson)  \n? JsonConvert.DeserializeObject<IEnumerable<Guid>>(_smsResponseIdJson)  \n: Enumerable.Empty<Guid>();  \n}  \n}  \n/* Meta property that defines if the transition starts based on a  \nresponse. */  \n[MetaTypeProperty(\"{3FFA4EA0-62CC-49A8-91FF-4096AEC561F6}\",  \nIsExtraProperty = true, IsUserProperty = true)]  \npublic virtual bool IsResponseBasedStart {  \nget;  \nset;  \n}  \n/* Read element metadata from the schema definition during  \ndeserialization. */  \nprotected override void ApplyMetaDataValue(DataReader reader) {  \nbase.ApplyMetaDataValue(reader);  \nswitch (reader.CurrentName) {  \ncase SmsResponseIdPropertyName:  \n_smsResponseIdJson = reader.GetValue<string>();  \nbreak;  \ncase IsResponseBasedStartPropertyName:  \nIsResponseBasedStart = reader.GetBoolValue();  \nbreak;  \ndefault:  \nbreak;  \n}  \n}  \n/* Write element metadata to the schema definition during serialization. */  \npublic override void WriteMetaData(DataWriter writer) {  \nbase.WriteMetaData(writer);  \nwriter.WriteValue(  \nIsResponseBasedStartPropertyName,  \nIsResponseBasedStart,  \nfalse  \n);  \nwriter.WriteValue(  \nSmsResponseIdPropertyName,  \n_smsResponseIdJson,  \nnull  \n);  \n}  \n/* Create a clone of the schema element. */  \npublic override object Clone() {  \nreturn new UsrSmsConditionalTransitionElement(this);  \n}  \n/* Create a copy of the element using rebind support for schema references. */  \npublic override object Copy(  \nDictionary<Guid, Guid> dictToRebind,  \nCore.Campaign.CampaignSchema parentSchema  \n) {  \nreturn new UsrSmsConditionalTransitionElement(  \nthis,  \ndictToRebind,  \nparentSchema  \n);  \n}  \n/* Create the runtime process flow element that will be executed in  \nthe campaign. Pass metadata values to the executable process element. */  \npublic override ProcessFlowElement CreateProcessFlowElement(  \nUserConnection userConnection  \n) {  \nvar sourceElement = SourceRef as UsrSmsElement;  \nvar executableElement = new UsrSmsConditionalTransitionFlowElement {  \nUserConnection = userConnection,  \nSmsResponses = SmsResponseId,  \nPhoneNumber = sourceElement.PhoneNumber,  \nSmsText = sourceElement.SmsText  \n};  \nInitializeCampaignProcessFlowElement(executableElement);  \nInitializeCampaignTransitionFlowElement(executableElement);  \nInitializeConditionalTransitionFlowElement(executableElement);  \nreturn executableElement;  \n}  \n}  \n}  \n5. **Click Save and publish**.\n## 6\\. Extend campaign connector manager\u200b\n1. **Click Add** \u2192 **Module**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nCode| UsrSmsCampaignConnectorManager  \nTitle| SMS campaign connector manager  \n3. **Add the source code**.\nUsrSmsCampaignConnectorManager\ndefine(\"UsrSmsCampaignConnectorManager\", [], function() {  \nExt.define(\"Terrasoft.UsrSmsCampaignConnectorManager\", {  \n/* Override the standard \"CampaignConnectorManager\" module to extend  \nits logic with custom SMS connector handling. */  \noverride: \"Terrasoft.CampaignConnectorManager\",  \n/* Initialize mapping between the campaign element (arrow source) and  \nthe corresponding transition schema (arrow type). Add a mapping for  \nthe custom SMS element. */  \ninitMappingCollection: function() {  \nthis.callParent(arguments);  \nthis.connectorTypesMappingCollection.addIfNotExists(  \n\"UsrSmsElement\",  \n\"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"  \n);  \n},  \n/* Virtual method override. Called before the arrow is replaced with  \na new type. Can be used to execute additional preprocessing logic  \nwhen the connector type changes. */  \nadditionalBeforeChange: function(prevTransition, sourceItem, targetItem) {  \n/* Implement custom preprocessing logic. */  \n},  \n/* Virtual method override. Populate additional properties of the  \nnew arrow based on the properties of the previous arrow. */  \nfillAdditionalProperties: function(prevElement, newElement) {  \nif (newElement.getTypeInfo().typeName === \"UsrProcessSmsConditionalTransitionSchema\") {  \n/* Copy the configured SMS responses from the previous arrow,  \nif they exist. */  \nnewElement.smsResponseId = prevElement.smsResponseId  \n? prevElement.smsResponseId  \n: null;  \n/* Copy the flag that defines whether the transition is response-based. */  \nnewElement.isResponseBasedStart = prevElement.isResponseBasedStart  \n? prevElement.isResponseBasedStart  \n: false;  \n}  \n}  \n});  \n});  \n4. **Click Save**.\n## 7\\. Connect the business logic of the campaign element flow\u200b\n1. **Click Add** \u2192 **Replacing view model**.\n2. **Fill out the schema properties**.\nFor this example, use the following schema properties.\nProperty| Property value  \n---|---  \nParent object| BootstrapModulesV2  \n3. **Add the source code**.\nBootstrapModulesV2\n/* Define a replacing view model schema named \"BootstrapModulesV2.\" This schema  \nis used to include additional client modules that must be loaded during the  \napp startup process. Custom SMS campaign connector manager and the custom  \nconditional transition schema are added as dependencies.  \n\"UsrSmsCampaignConnectorManager\" is the previously created custom connector  \nmanager that overrides \"CampaignConnectorManager\" and implements SMS-specific  \nflow logic.  \n\"UsrProcessSmsConditionalTransitionSchema\" is the custom schema that defines  \nthe conditional transition for the SMS campaign element.*/  \ndefine(\"BootstrapModulesV2\", [\"UsrSmsCampaignConnectorManager\",  \n\"UsrProcessSmsConditionalTransitionSchema\"], function() {});  \n/* Explicitly require the same dependencies to ensure they are loaded at  \nruntime when the app starts. */  \nrequire([\"UsrSmsCampaignConnectorManager\",\"UsrProcessSmsConditionalTransitionSchema\"]);  \n4. **Click Save**.\n## View the result\u200b\n1. **Open the Campaigns section**.\n2. **Create a campaign** that has arbitrary parameters. Instructions [Add a campaign](https://academy.creatio.com/documents?ver=8.3&id=1074) (user documentation).\n3. **Click Edit campaign flow**.\n4. **Add the SMS element** to the canvas.\n5. **Add arbitrary elements** to the canvas. For example, **Exit from campaign**.\n6. **Add a flow** between the **SMS** and **Exit from campaign** elements.\n**As a result** , the flow executes the following actions:\n* Omit the responses to the bulk SMS. [View the result >>>](https://academy.creatio.com/documents?ver=8.3&id=15713&anchor=view-result)\n* Handle delivered SMS responses and SMS responses whose receiving ends with error. [View the result >>>](https://academy.creatio.com/documents?ver=8.3&id=15713&anchor=view-result-1)\n* Receive SMS responses, regardless of their value. [View the result >>>](https://academy.creatio.com/documents?ver=8.3&id=15713&anchor=view-result-2)\nIf you need to use the current example in your instance, we recommend creating the **Bulk SMS** object schema instead of storing SMS details directly in campaign elements. The `UsrTestSmsElement` and `UsrSmsConditionalTransitionElement` object schemas should reference only the ID of the bulk SMS record, rather than fields such as `SmsText` or `PhoneNumber`. The `UsrTestSmsCampaignProcessElement` executed element should implement the audience registration logic in its` Execute()` method. For example, by adding contacts to the bulk SMS audience. A separate mechanism (or multiple mechanisms) must handle sending SMS messages and recording participant responses. Based on these responses, the campaign flow will transfer the audience to the next campaign step.\n* * *\n## Source code\u200b\n* UsrProcessSmsConditionalTransitionSchema\n* CampaignElementSchemaManagerEx\n* UsrSmsConditionalTransitionPropertiesPanel\n* UsrSmsConditionalTransitionFlowElement\n* UsrSmsConditionalTransitionElement\n* UsrSmsCampaignConnectorManager\n* BootstrapModulesV2\ndefine(\"UsrProcessSmsConditionalTransitionSchema\", [\"CampaignEnums\",  \n\"UsrProcessSmsConditionalTransitionSchemaResources\",  \n\"ProcessCampaignConditionalSequenceFlowSchema\"], function(CampaignEnums) {  \nExt.define(\"Terrasoft.manager.UsrProcessSmsConditionalTransitionSchema\", {  \n/* Parent schema. */  \nextend: \"Terrasoft.ProcessCampaignConditionalSequenceFlowSchema\",  \n/* Alternative class name. */  \nalternateClassName: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\",  \n/* ID of the new campaign element. */  \nmanagerItemUId: \"4b5e70b0-a631-458e-ab22-856ddc913444\",  \n/* Mixins that extend functionality. */  \nmixins: {  \nparametrizedProcessSchemaElement: \"Terrasoft.ParametrizedProcessSchemaElement\"  \n},  \n/* Full name of the class that implements the campaign element logic.  \nThis class saves and reads\u00a0the element properties from the schema  \nproperties. Since the class is placed in the regular package, use the  \n\"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,  \nTerrasoft.Configuration\" typeName. If the class is placed in the  \nassembly package, use  \ntypeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,  \nSomeAssemblyPackageName\" */  \ntypeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,\" +  \n\"Terrasoft.Configuration\",  \n/* Arrow element name used for linking campaign elements. */  \nconnectionUserHandleName: \"SmsConditionalTransition\",  \n/* Schema name of the edit page. */  \neditPageSchemaName: \"UsrSmsConditionalTransitionPropertiesPanel\",  \n/* Element type. */  \nelementType: CampaignEnums.CampaignSchemaElementTypes.CONDITIONAL_TRANSITION,  \n/* ID of the SMS response option linked to the transition. */  \nsmsResponseId: null,  \n/* Define whether the transition is based on a specific SMS  \nresponse condition. */  \nisResponseBasedStart: false,  \n/* Expand the properties for serialization. */  \ngetSerializableProperties: function() {  \nvar baseSerializableProperties = this.callParent(arguments);  \nExt.Array.push(baseSerializableProperties, [\"smsResponseId\",  \n\"isResponseBasedStart\"]);  \nreturn baseSerializableProperties;  \n}  \n});  \nreturn Terrasoft.UsrProcessSmsConditionalTransitionSchema;  \n}  \n);  \nrequire([\"CampaignElementSchemaManager\", \"UsrProcessSmsConditionalTransitionSchema\"],  \nfunction() {  \n/* Register the \"UsrProcessSmsConditionalTransitionSchema\" in the Campaign Designer. */  \nvar coreElementClassNames = Terrasoft.CampaignElementSchemaManager.coreElementClassNames;  \n/* Add the custom schema to the list of available schemas. */  \ncoreElementClassNames.push({  \nitemType: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"  \n});  \n}  \n);  \ndefine(\"UsrSmsConditionalTransitionPropertiesPanel\", [\"BusinessRuleModule\",  \n\"LookupUtilities\"], function(BusinessRuleModule, LookupUtilities) {  \nreturn {  \nmessages: {},  \n/* Schema attributes. */  \nattributes: {  \n/* Attribute that stores data about list of participants. */  \n\"ReactionModeEnum\": {  \ndataValueType: this.Terrasoft.DataValueType.CUSTOM_OBJECT,  \ntype: this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,  \nvalue: {  \nDefault: {  \nvalue: \"0\",  \ncaptionName: \"Resources.Strings.ReactionModeDefault\"  \n},  \nWithCondition: {  \nvalue: \"1\",  \ncaptionName: \"Resources.Strings.ReactionModeWithCondition\"  \n}  \n}  \n},  \n/* Attribute that stores data about participants' responses. */  \n\"ReactionMode\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.LOOKUP,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,  \n\"isRequired\": true  \n},  \n/* Attribute that stores data about SMS delivery status. */  \n\"IsSmsDelivered\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN  \n},  \n/* Attribute that stores data about error occurred while  \nreceiving SMS. */  \n\"IsErrorWhileReceiving\": {  \n\"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,  \n\"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN  \n}  \n},  \n/* Schema business rules. */  \nrules: {  \n/* Make the \"ReactionConditionDecision\" business rule  \nrequired when the \"ReactionMode\" attribute is equal \"1.\" */  \n\"ReactionConditionDecision\": {  \n\"BindReactionConditionDecisionRequiredToReactionMode\": {  \n\"ruleType\": BusinessRuleModule.enums.RuleType.BINDPARAMETER,  \n\"property\": BusinessRuleModule.enums.Property.REQUIRED,  \n\"conditions\": [{  \n\"leftExpression\": {  \n\"type\": BusinessRuleModule.enums.ValueType.ATTRIBUTE,  \n\"attribute\": \"ReactionMode\"  \n},  \n\"comparisonType\": this.Terrasoft.ComparisonType.EQUAL,  \n\"rightExpression\": {  \n\"type\": BusinessRuleModule.enums.ValueType.CONSTANT,  \n\"value\": \"1\"  \n}  \n}]  \n}  \n}  \n},  \n/* Schema methods. */  \nmethods: {  \n/* Return mapping of attributes to the \"SMS response  \ntype\" (\"SmsResponseType\" code) lookup records. */  \ngetResponseConfig: function() {  \nreturn {  \n\"IsSmsDelivered\": \"5a9f08a4-c7f2-4dc8-9940-13ba1b2762cf\",  \n\"IsErrorWhileReceiving\": \"4a790626-bfbb-4ca7-a9f2-595000262561\"  \n};  \n},  \n/* Bind the handler to the event that changes the \"ReactionMode\"  \nattribute value. */  \nsubscribeEvents: function() {  \nthis.callParent(arguments);  \n/* Subscribe to changes of the \"ReactionMode\" attribute  \nvalue. */  \nthis.on(  \n\"change:ReactionMode\",  \nthis.onReactionModeLookupChanged,  \nthis  \n);  \n},  \n/* Handle the ReactionMode attribute change event. */  \nonReactionModeLookupChanged: function() {  \nvar reactionModeEnum = this.get(\"ReactionModeEnum\");  \nvar reactionMode = this.get(\"ReactionMode\");  \nvar decisionModeEnabled =(reactionMode &&  \nreactionMode.value === reactionModeEnum.WithCondition.value);  \nif (!decisionModeEnabled) {  \nthis.set(\"ReactionConditionDecision\", null);  \n}  \n},  \n/* Initialize attributes for displaying the page when opened. */  \ninitParameters: function(element) {  \nthis.callParent(arguments);  \nvar isResponseBasedStart = element.isResponseBasedStart;  \nthis.initReactionMode(isResponseBasedStart);  \nthis.initSmsResponses(element.smsResponseId);  \n},  \n/* Cut the string to the specified length and append an  \nellipsis at the end. Auxiliary method. */  \ncutString: function(strValue, strLength) {  \nvar ellipsis = Ext.String.ellipsis(  \nstrValue.substring(strLength),  \n0  \n);  \nreturn strValue.substring(0, strLength) + ellipsis;  \n},  \n/* Set the status value to \"Delivered.\" */  \ninitIsSmsDelivered: function(value) {  \nif (value === undefined) {  \nvalue = this.get(\"IsSmsDelivered\");  \n}  \nthis.set(\"IsSmsDelivered\", value);  \n},  \n/* Set the status value to \"Error while receiving.\" */  \ninitIsErrorWhileReceiving: function(value) {  \nif (value === undefined) {  \nvar isErrorWhileReceiving = this.get(\"IsErrorWhileReceiving\");  \nvalue = isErrorWhileReceiving;  \n}  \nthis.set(\"IsErrorWhileReceiving\", value);  \n},  \n/* Initialize the selected responses when opening the page. */  \ninitSmsResponses: function(responseIdsJson) {  \nif (!responseIdsJson) {  \nreturn;  \n}  \nvar responseIds = JSON.parse(responseIdsJson);  \nvar config = this.getResponseConfig();  \nTerrasoft.each(config, function(propValue, propName) {  \nif (responseIds.indexOf(propValue) > -1) {  \nthis.set(propName, true);  \n}  \n}, this);  \n},  \n/* Initialize the \"ReactionMode\" attribute based on  \n\"isResponseBasedStart.\" */  \ninitReactionMode: function(value) {  \nvar isDefault = !value;  \nthis.setLookupValue(  \nisDefault,  \n\"ReactionMode\",  \n\"WithCondition\",  \nthis  \n);  \n},  \n/* Parse JSON array of IDs. Return \"[]\" on error. */  \ngetIds: function(idsJson) {  \nif (idsJson) {  \ntry {  \nvar ids = JSON.parse(idsJson);  \nif (this.Ext.isArray(ids)) {  \nreturn ids;  \n}  \n} catch (error) {  \nreturn [];  \n}  \n}  \nreturn [];  \n},  \n/* Populate \"ReactionMode\" attribute list from \"ReactionModeEnum\". */  \nonPrepareReactionModeList: function(filter, list) {  \nthis.prepareList(\"ReactionModeEnum\", list, this);  \n},  \n/* Save UI values back to the process element before save. */  \nsaveValues: function() {  \nthis.callParent(arguments);  \nvar element = this.get(\"ProcessElement\");  \nvar isResponseBasedStart = this.getIsReactionModeWithConditions();  \nelement.isResponseBasedStart = isResponseBasedStart;  \nelement.smsResponseId = this.getSmsResponseId(isResponseBasedStart);  \n},  \n/* Serialize selected response IDs to JSON.*/  \ngetSmsResponseId: function(isResponseActive) {  \nvar responseIds = [];  \nif (isResponseActive) {  \nvar config = this.getResponseConfig();  \nTerrasoft.each(config, function(propValue, propName) {  \nvar attrValue = this.get(propName);  \nif (attrValue && propValue) {  \nresponseIds.push(propValue);  \n}  \n}, this);  \n}  \nreturn JSON.stringify(responseIds);  \n},  \n/* Return lookup underlying ID or null. */  \ngetLookupValue: function(parameterName) {  \nvar value = this.get(parameterName);  \nreturn value ? value.value : null;  \n},  \n/* Help context code for the property page. */  \ngetContextHelpCode: function() {  \nreturn \"CampaignConditionalSequenceFlow\";  \n},  \n/* Return \"true\" if \"ReactionMode\" is set to \"1.\" */  \ngetIsReactionModeWithConditions: function() {  \nreturn this.isLookupValueEqual(\"ReactionMode\", \"1\", this);  \n},  \n/* Return source element of the transition if available. */  \ngetSourceElement: function() {  \nvar flowElement = this.get(\"ProcessElement\");  \nif (flowElement) {  \nreturn flowElement.findSourceElement();  \n}  \nreturn null;  \n},  \n/* Format question caption including the source element name. */  \ngetQuestionCaption: function() {  \nvar caption = this.get(\"Resources.Strings.ReactionModeCaption\");  \ncaption = this.Ext.String.format(  \ncaption,  \nthis.getSourceElement().getCaption()  \n);  \nreturn caption;  \n}  \n},  \n/* The schema view description. */  \ndiff: /**SCHEMA_DIFF*/[  \n/* Page container.*/  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"parentName\": \"ContentContainer\",  \n\"className\": \"Terrasoft.GridLayoutEdit\",  \n\"values\":  \n{  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 2,  \n\"colSpan\": 24  \n},  \n\"itemType\": this.Terrasoft.ViewItemType.GRID_LAYOUT,  \n\"items\": []  \n}  \n},  \n/* Title label. */  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionModeLabel\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"values\":  \n{  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 0,  \n\"colSpan\": 24  \n},  \n\"itemType\": this.Terrasoft.ViewItemType.LABEL,  \n\"caption\":  \n{  \n\"bindTo\": \"getQuestionCaption\"  \n},  \n\"classes\":  \n{  \n\"labelClass\": [\"t-title-label-proc\"]  \n}  \n}  \n},  \n/* \"ReactionMode\" list. */  \n{  \n\"operation\": \"insert\",  \n\"name\": \"ReactionMode\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"values\":  \n{  \n\"contentType\": this.Terrasoft.ContentType.ENUM,  \n\"controlConfig\":  \n{  \n\"prepareList\":  \n{  \n\"bindTo\": \"onPrepareReactionModeList\"  \n}  \n},  \n\"isRequired\": true,  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 1,  \n\"colSpan\": 24  \n},  \n\"labelConfig\":  \n{  \n\"visible\": false  \n},  \n\"wrapClass\": [\"no-caption-control\"]  \n}  \n},  \n/* \"IsSmsDelivered\" checkbox.*/  \n{  \n\"operation\": \"insert\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"name\": \"IsSmsDelivered\",  \n\"values\":  \n{  \n\"wrapClass\": [\"t-checkbox-control\"],  \n\"visible\":  \n{  \n\"bindTo\": \"ReactionMode\",  \n\"bindConfig\":  \n{  \nconverter: \"getIsReactionModeWithConditions\"  \n}  \n},  \n\"caption\":  \n{  \n\"bindTo\": \"Resources.Strings.IsSmsDelivered\"  \n},  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 2,  \n\"colSpan\": 22  \n}  \n}  \n},  \n/* \"IsErrorWhileReceiving\" checkbox.*/  \n{  \n\"operation\": \"insert\",  \n\"parentName\": \"ReactionContainer\",  \n\"propertyName\": \"items\",  \n\"name\": \"IsErrorWhileReceiving\",  \n\"values\":  \n{  \n\"wrapClass\": [\"t-checkbox-control\"],  \n\"visible\":  \n{  \n\"bindTo\": \"ReactionMode\",  \n\"bindConfig\":  \n{  \nconverter: \"getIsReactionModeWithConditions\"  \n}  \n},  \n\"caption\":  \n{  \n\"bindTo\": \"Resources.Strings.IsErrorWhileReceiving\"  \n},  \n\"layout\":  \n{  \n\"column\": 0,  \n\"row\": 3,  \n\"colSpan\": 22  \n}  \n}  \n}  \n]/**SCHEMA_DIFF*/  \n};  \n}  \n);  \nnamespace Terrasoft.Configuration  \n{  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing Terrasoft.Common;  \nusing Terrasoft.Core.DB;  \n/* Define a custom element flow. */  \npublic class UsrSmsConditionalTransitionFlowElement  \n: ConditionalTransitionFlowElement  \n{  \n/* Assign the \"SmsText\" attribute value in the class. */  \npublic string SmsText {  \nget;  \nset;  \n}  \n/* Assign the \"PhoneNumber\" attribute value in the class. */  \npublic string PhoneNumber {  \nget;  \nset;  \n}  \n/* Assign the collection of SMS response IDs in the class. */  \npublic IEnumerable<Guid> SmsResponses {  \nget;  \nset;  \n}  \n/* Extend the base \"TransitionQuery\" with participant responses  \nfilter. */  \nprivate void ExtendWithResponses() {  \nTransitionQuery.CheckArgumentNull(\"TransitionQuery\");  \nif (SmsResponses.Any()) {  \nQuery responseSelect = GetSelectByParticipantResponses();  \nTransitionQuery.And(\"ContactId\").In(responseSelect);  \n}  \n}  \n/* Build a subquery selecting \"ContactId\" from \"UsrSmsRecipient\"  \nfiltered by \"SmsText,\" \"PhoneNumber,\" and \"SmsResponseId.\" */  \nprivate Query GetSelectByParticipantResponses() {  \nvar responseSelect = new Select(UserConnection)  \n.Column(\"ContactId\")  \n.From(\"UsrSmsRecipient\")  \n.Where(\"SmsText\").IsEqual(Column.Parameter(SmsText))  \n.And(\"PhoneNumber\").IsEqual(Column.Parameter(PhoneNumber))  \n.And(\"SmsResponseId\")  \n.In(Column.Parameters(SmsResponses)) as Select;  \nresponseSelect.SpecifyNoLockHints(true);  \nreturn responseSelect;  \n}  \n/* Extend base query with response filters. */  \nprotected override void CreateQuery() {  \nbase.CreateQuery();  \nExtendWithResponses();  \n}  \n}  \n}  \nnamespace Terrasoft.Configuration  \n{  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Collections.ObjectModel;  \nusing System.Globalization;  \nusing System.Linq;  \nusing Newtonsoft.Json;  \nusing Terrasoft.Common;  \nusing Terrasoft.Core;  \nusing Terrasoft.Core.Campaign;  \nusing Terrasoft.Core.DB;  \nusing Terrasoft.Core.Process;  \n[DesignModeProperty(  \nName = \"SmsResponseId\",  \nUsageType = DesignModeUsageType.NotVisible,  \nMetaPropertyName = SmsResponseIdPropertyName)]  \n[DesignModeProperty(  \nName = \"IsResponseBasedStart\",  \nUsageType = DesignModeUsageType.Advanced,  \nMetaPropertyName = IsResponseBasedStartPropertyName)]  \npublic class UsrSmsConditionalTransitionElement  \n: ConditionalSequenceFlowElement  \n{  \n/* Constants for property names used in metadata serialization. */  \nprivate const string SmsResponseIdPropertyName = \"SmsResponseId\";  \nprivate const string IsResponseBasedStartPropertyName = \"IsResponseBasedStart\";  \n/* Default constructor. */  \npublic UsrSmsConditionalTransitionElement() {}  \n/* Copy constructor without rebind and schema. */  \npublic UsrSmsConditionalTransitionElement(  \nUsrSmsConditionalTransitionElement source)  \n: this(source, null, null)   \n{}  \n/* Copy constructors for cloning the element in schema operations. */  \npublic UsrSmsConditionalTransitionElement(  \nUsrSmsConditionalTransitionElement source,  \nDictionary<Guid, Guid> dictToRebind,  \nCore.Campaign.CampaignSchema parentSchema)  \n: base(source, dictToRebind, parentSchema) {  \nIsResponseBasedStart = source.IsResponseBasedStart;  \n_smsResponseIdJson = JsonConvert.SerializeObject(  \nsource.SmsResponseId  \n);  \n}  \n/* Store \"SmsResponseId\" in serialized JSON format. */  \nprivate string _smsResponseIdJson;  \n/* Internal helper property, return the collection of response IDs. */  \nprivate IEnumerable<Guid> Responses {  \nget {  \nreturn SmsResponseId;  \n}  \n}  \n/* Meta property that stores a collection of SMS response IDs. */  \n[MetaTypeProperty(\"{DC597899-B831-458A-A58E-FB43B1E266AC}\")]  \npublic IEnumerable<Guid> SmsResponseId {  \nget {  \nreturn !string.IsNullOrWhiteSpace(_smsResponseIdJson)  \n? JsonConvert.DeserializeObject<IEnumerable<Guid>>(_smsResponseIdJson)  \n: Enumerable.Empty<Guid>();  \n}  \n}  \n/* Meta property that defines if the transition starts based on a  \nresponse. */  \n[MetaTypeProperty(\"{3FFA4EA0-62CC-49A8-91FF-4096AEC561F6}\",  \nIsExtraProperty = true, IsUserProperty = true)]  \npublic virtual bool IsResponseBasedStart {  \nget;  \nset;  \n}  \n/* Read element metadata from the schema definition during  \ndeserialization. */  \nprotected override void ApplyMetaDataValue(DataReader reader) {  \nbase.ApplyMetaDataValue(reader);  \nswitch (reader.CurrentName) {  \ncase SmsResponseIdPropertyName:  \n_smsResponseIdJson = reader.GetValue<string>();  \nbreak;  \ncase IsResponseBasedStartPropertyName:  \nIsResponseBasedStart = reader.GetBoolValue();  \nbreak;  \ndefault:  \nbreak;  \n}  \n}  \n/* Write element metadata to the schema definition during serialization. */  \npublic override void WriteMetaData(DataWriter writer) {  \nbase.WriteMetaData(writer);  \nwriter.WriteValue(  \nIsResponseBasedStartPropertyName,  \nIsResponseBasedStart,  \nfalse  \n);  \nwriter.WriteValue(  \nSmsResponseIdPropertyName,  \n_smsResponseIdJson,  \nnull  \n);  \n}  \n/* Create a clone of the schema element. */  \npublic override object Clone() {  \nreturn new UsrSmsConditionalTransitionElement(this);  \n}  \n/* Create a copy of the element using rebind support for schema references. */  \npublic override object Copy(  \nDictionary<Guid, Guid> dictToRebind,  \nCore.Campaign.CampaignSchema parentSchema  \n) {  \nreturn new UsrSmsConditionalTransitionElement(  \nthis,  \ndictToRebind,  \nparentSchema  \n);  \n}  \n/* Create the runtime process flow element that will be executed in  \nthe campaign. Pass metadata values to the executable process element. */  \npublic override ProcessFlowElement CreateProcessFlowElement(  \nUserConnection userConnection  \n) {  \nvar sourceElement = SourceRef as UsrSmsElement;  \nvar executableElement = new UsrSmsConditionalTransitionFlowElement {  \nUserConnection = userConnection,  \nSmsResponses = SmsResponseId,  \nPhoneNumber = sourceElement.PhoneNumber,  \nSmsText = sourceElement.SmsText  \n};  \nInitializeCampaignProcessFlowElement(executableElement);  \nInitializeCampaignTransitionFlowElement(executableElement);  \nInitializeConditionalTransitionFlowElement(executableElement);  \nreturn executableElement;  \n}  \n}  \n}  \ndefine(\"UsrSmsCampaignConnectorManager\", [], function() {  \nExt.define(\"Terrasoft.UsrSmsCampaignConnectorManager\", {  \n/* Override the standard \"CampaignConnectorManager\" module to extend  \nits logic with custom SMS connector handling. */  \noverride: \"Terrasoft.CampaignConnectorManager\",  \n/* Initialize mapping between the campaign element (arrow source) and  \nthe corresponding transition schema (arrow type). Add a mapping for  \nthe custom SMS element. */  \ninitMappingCollection: function() {  \nthis.callParent(arguments);  \nthis.connectorTypesMappingCollection.addIfNotExists(  \n\"UsrSmsElement\",  \n\"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"  \n);  \n},  \n/* Virtual method override. Called before the arrow is replaced with  \na new type. Can be used to execute additional preprocessing logic  \nwhen the connector type changes. */  \nadditionalBeforeChange: function(prevTransition, sourceItem, targetItem) {  \n/* Implement custom preprocessing logic. */  \n},  \n/* Virtual method override. Populate additional properties of the  \nnew arrow based on the properties of the previous arrow. */  \nfillAdditionalProperties: function(prevElement, newElement) {  \nif (newElement.getTypeInfo().typeName === \"UsrProcessSmsConditionalTransitionSchema\") {  \n/* Copy the configured SMS responses from the previous arrow,  \nif they exist. */  \nnewElement.smsResponseId = prevElement.smsResponseId  \n? prevElement.smsResponseId  \n: null;  \n/* Copy the flag that defines whether the transition is response-based. */  \nnewElement.isResponseBasedStart = prevElement.isResponseBasedStart  \n? prevElement.isResponseBasedStart  \n: false;  \n}  \n}  \n});  \n});  \n/* Define a replacing view model schema named \"BootstrapModulesV2.\" This schema  \nis used to include additional client modules that must be loaded during the  \napp startup process. Custom SMS campaign connector manager and the custom  \nconditional transition schema are added as dependencies.  \n\"UsrSmsCampaignConnectorManager\" is the previously created custom connector  \nmanager that overrides \"CampaignConnectorManager\" and implements SMS-specific  \nflow logic.  \n\"UsrProcessSmsConditionalTransitionSchema\" is the custom schema that defines  \nthe conditional transition for the SMS campaign element.*/  \ndefine(\"BootstrapModulesV2\", [\"UsrSmsCampaignConnectorManager\",  \n\"UsrProcessSmsConditionalTransitionSchema\"], function() {});  \n/* Explicitly require the same dependencies to ensure they are loaded at  \nruntime when the app starts. */  \nrequire([\"UsrSmsCampaignConnectorManager\",\"UsrProcessSmsConditionalTransitionSchema\"]);  \n* * *\n## Resources\u200b\n[Package with example implementation (campaign element)](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/packages/ImplementCampaignElement/8.3/sdkCustomCampaignElement_2025-09-18_14.08.36.zip)\n[Package with example implementation (flow for campaign element)](https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/packages/ImplementCustomCampaignElement/8.3/sdkCustomCampaignElementFlow_2025-09-19_15.49.06.zip)",
  "code_examples": [
    {
      "code": "define(\"UsrProcessSmsConditionalTransitionSchema\", [\"CampaignEnums\",    \"UsrProcessSmsConditionalTransitionSchemaResources\",    \"ProcessCampaignConditionalSequenceFlowSchema\"], function(CampaignEnums) {        Ext.define(\"Terrasoft.manager.UsrProcessSmsConditionalTransitionSchema\", {            /* Parent schema. */            extend: \"Terrasoft.ProcessCampaignConditionalSequenceFlowSchema\",            /* Alternative class name. */            alternateClassName: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\",            /* ID of the new campaign element. */            managerItemUId: \"4b5e70b0-a631-458e-ab22-856ddc913444\",            /* Mixins that extend functionality. */            mixins: {                parametrizedProcessSchemaElement: \"Terrasoft.ParametrizedProcessSchemaElement\"            },            /* Full name of the class that implements the campaign element logic.            This class saves and reads\u00a0the element properties from the schema            properties. Since the class is placed in the regular package, use the            \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,            Terrasoft.Configuration\" typeName. If the class is placed in the            assembly package, use            typeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,            SomeAssemblyPackageName\" */            typeName: \"Terrasoft.Configuration.UsrSmsConditionalTransitionElement,\" +                \"Terrasoft.Configuration\",            /* Arrow element name used for linking campaign elements. */            connectionUserHandleName: \"SmsConditionalTransition\",            /* Schema name of the edit page. */            editPageSchemaName: \"UsrSmsConditionalTransitionPropertiesPanel\",            /* Element type. */            elementType: CampaignEnums.CampaignSchemaElementTypes.CONDITIONAL_TRANSITION,            /* ID of the SMS response option linked to the transition. */            smsResponseId: null,            /* Define whether the transition is based on a specific SMS            response condition. */            isResponseBasedStart: false,            /* Expand the properties for serialization. */            getSerializableProperties: function() {                var baseSerializableProperties = this.callParent(arguments);                Ext.Array.push(baseSerializableProperties, [\"smsResponseId\",                    \"isResponseBasedStart\"]);                return baseSerializableProperties;            }        });        return Terrasoft.UsrProcessSmsConditionalTransitionSchema;    });",
      "language": "js",
      "context": "Add source codethat implements the flow conditions.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "require([\"CampaignElementSchemaManager\", \"UsrProcessSmsConditionalTransitionSchema\"],    function() {        /* Register the \"UsrProcessSmsConditionalTransitionSchema\" in the Campaign Designer. */        var coreElementClassNames = Terrasoft.CampaignElementSchemaManager.coreElementClassNames;        /* Add the custom schema to the list of available schemas. */        coreElementClassNames.push({            itemType: \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"        });    });",
      "language": "js",
      "context": "Add the source code.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "define(\"UsrSmsConditionalTransitionPropertiesPanel\", [\"BusinessRuleModule\",    \"LookupUtilities\"], function(BusinessRuleModule, LookupUtilities) {        return {            messages: {},            /* Schema attributes. */            attributes: {                /* Attribute that stores data about list of participants. */                \"ReactionModeEnum\": {                    dataValueType: this.Terrasoft.DataValueType.CUSTOM_OBJECT,                    type: this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,                    value: {                        Default: {                            value: \"0\",                            captionName: \"Resources.Strings.ReactionModeDefault\"                        },                        WithCondition: {                            value: \"1\",                            captionName: \"Resources.Strings.ReactionModeWithCondition\"                        }                    }                },                /* Attribute that stores data about participants' responses. */                \"ReactionMode\": {                    \"dataValueType\": this.Terrasoft.DataValueType.LOOKUP,                    \"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN,                    \"isRequired\": true                },                /* Attribute that stores data about SMS delivery status. */                \"IsSmsDelivered\": {                    \"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,                    \"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN                },                /* Attribute that stores data about error occurred while                receiving SMS. */                \"IsErrorWhileReceiving\": {                    \"dataValueType\": this.Terrasoft.DataValueType.BOOLEAN,                    \"type\": this.Terrasoft.ViewModelColumnType.VIRTUAL_COLUMN                }            },            /* Schema business rules. */            rules: {                /* Make the \"ReactionConditionDecision\" business rule                required when the \"ReactionMode\" attribute is equal \"1.\" */                \"ReactionConditionDecision\": {                    \"BindReactionConditionDecisionRequiredToReactionMode\": {                        \"ruleType\": BusinessRuleModule.enums.RuleType.BINDPARAMETER,                        \"property\": BusinessRuleModule.enums.Property.REQUIRED,                        \"conditions\": [{                            \"leftExpression\": {                                \"type\": BusinessRuleModule.enums.ValueType.ATTRIBUTE,                                \"attribute\": \"ReactionMode\"                            },                            \"comparisonType\": this.Terrasoft.ComparisonType.EQUAL,                            \"rightExpression\": {                                \"type\": BusinessRuleModule.enums.ValueType.CONSTANT,                                \"value\": \"1\"                            }                        }]                    }                }            },            /* Schema methods. */            methods: {                /* Return mapping of attributes to the \"SMS response                type\" (\"SmsResponseType\" code) lookup records. */                getResponseConfig: function() {                    return {                        \"IsSmsDelivered\": \"5a9f08a4-c7f2-4dc8-9940-13ba1b2762cf\",                        \"IsErrorWhileReceiving\": \"4a790626-bfbb-4ca7-a9f2-595000262561\"                    };                },                /* Bind the handler to the event that changes the \"ReactionMode\"                attribute value. */                subscribeEvents: function() {                    this.callParent(arguments);                    /* Subscribe to changes of the \"ReactionMode\" attribute                    value. */                    this.on(                        \"change:ReactionMode\",                        this.onReactionModeLookupChanged,                        this                    );                },                /* Handle the ReactionMode attribute change event. */                onReactionModeLookupChanged: function() {                    var reactionModeEnum = this.get(\"ReactionModeEnum\");                    var reactionMode = this.get(\"ReactionMode\");                    var decisionModeEnabled =(reactionMode &&                        reactionMode.value === reactionModeEnum.WithCondition.value);                    if (!decisionModeEnabled) {                        this.set(\"ReactionConditionDecision\", null);                    }                },                /* Initialize attributes for displaying the page when opened. */                initParameters: function(element) {                    this.callParent(arguments);                    var isResponseBasedStart = element.isResponseBasedStart;                    this.initReactionMode(isResponseBasedStart);                    this.initSmsResponses(element.smsResponseId);                },                /* Cut the string to the specified length and append an                ellipsis at the end. Auxiliary method. */                cutString: function(strValue, strLength) {                    var ellipsis = Ext.String.ellipsis(                        strValue.substring(strLength),                        0                    );                    return strValue.substring(0, strLength) + ellipsis;                },                /* Set the status value to \"Delivered.\" */                initIsSmsDelivered: function(value) {                    if (value === undefined) {                        value = this.get(\"IsSmsDelivered\");                    }                    this.set(\"IsSmsDelivered\", value);                },                /* Set the status value to \"Error while receiving.\" */                initIsErrorWhileReceiving: function(value) {                    if (value === undefined) {                        var isErrorWhileReceiving = this.get(\"IsErrorWhileReceiving\");                        value = isErrorWhileReceiving;                    }                    this.set(\"IsErrorWhileReceiving\", value);                },                /* Initialize the selected responses when opening the page. */                initSmsResponses: function(responseIdsJson) {                    if (!responseIdsJson) {                        return;                    }                    var responseIds = JSON.parse(responseIdsJson);                    var config = this.getResponseConfig();                    Terrasoft.each(config, function(propValue, propName) {                        if (responseIds.indexOf(propValue) > -1) {                            this.set(propName, true);                        }                    }, this);                },                /* Initialize the \"ReactionMode\" attribute based on                \"isResponseBasedStart.\" */                initReactionMode: function(value) {                    var isDefault = !value;                    this.setLookupValue(                        isDefault,                        \"ReactionMode\",                        \"WithCondition\",                        this                    );                },                /* Parse JSON array of IDs. Return \"[]\" on error. */                getIds: function(idsJson) {                    if (idsJson) {                        try {                            var ids = JSON.parse(idsJson);                            if (this.Ext.isArray(ids)) {                                return ids;                            }                        } catch (error) {                            return [];                        }                    }                    return [];                },                /* Populate \"ReactionMode\" attribute list from \"ReactionModeEnum\". */                onPrepareReactionModeList: function(filter, list) {                    this.prepareList(\"ReactionModeEnum\", list, this);                },                /* Save UI values back to the process element before save. */                saveValues: function() {                    this.callParent(arguments);                    var element = this.get(\"ProcessElement\");                    var isResponseBasedStart = this.getIsReactionModeWithConditions();                    element.isResponseBasedStart = isResponseBasedStart;                    element.smsResponseId = this.getSmsResponseId(isResponseBasedStart);                },                /* Serialize selected response IDs to JSON.*/                getSmsResponseId: function(isResponseActive) {                    var responseIds = [];                    if (isResponseActive) {                        var config = this.getResponseConfig();                        Terrasoft.each(config, function(propValue, propName) {                            var attrValue = this.get(propName);                            if (attrValue && propValue) {                                responseIds.push(propValue);                            }                        }, this);                    }                    return JSON.stringify(responseIds);                },                /* Return lookup underlying ID or null. */                getLookupValue: function(parameterName) {                    var value = this.get(parameterName);                    return value ? value.value : null;                },                /* Help context code for the property page. */                getContextHelpCode: function() {                    return \"CampaignConditionalSequenceFlow\";                },                /* Return \"true\" if \"ReactionMode\" is set to \"1.\" */                getIsReactionModeWithConditions: function() {                    return this.isLookupValueEqual(\"ReactionMode\", \"1\", this);                },                /* Return source element of the transition if available. */                getSourceElement: function() {                    var flowElement = this.get(\"ProcessElement\");                    if (flowElement) {                        return flowElement.findSourceElement();                    }                    return null;                },                /* Format question caption including the source element name. */                getQuestionCaption: function() {                    var caption = this.get(\"Resources.Strings.ReactionModeCaption\");                    caption = this.Ext.String.format(                        caption,                        this.getSourceElement().getCaption()                    );                    return caption;                }            },            /* The schema view description. */            diff: /**SCHEMA_DIFF*/[                /* Page container.*/                {                    \"operation\": \"insert\",                    \"name\": \"ReactionContainer\",                    \"propertyName\": \"items\",                    \"parentName\": \"ContentContainer\",                    \"className\": \"Terrasoft.GridLayoutEdit\",                    \"values\":                    {                        \"layout\":                        {                            \"column\": 0,                            \"row\": 2,                            \"colSpan\": 24                        },                        \"itemType\": this.Terrasoft.ViewItemType.GRID_LAYOUT,                        \"items\": []                    }                },                /* Title label. */                {                    \"operation\": \"insert\",                    \"name\": \"ReactionModeLabel\",                    \"parentName\": \"ReactionContainer\",                    \"propertyName\": \"items\",                    \"values\":                    {                        \"layout\":                        {                            \"column\": 0,                            \"row\": 0,                            \"colSpan\": 24                        },                        \"itemType\": this.Terrasoft.ViewItemType.LABEL,                        \"caption\":                        {                            \"bindTo\": \"getQuestionCaption\"                        },                        \"classes\":                        {                            \"labelClass\": [\"t-title-label-proc\"]                        }                    }                },                /* \"ReactionMode\" list. */                {                    \"operation\": \"insert\",                    \"name\": \"ReactionMode\",                    \"parentName\": \"ReactionContainer\",                    \"propertyName\": \"items\",                    \"values\":                    {                        \"contentType\": this.Terrasoft.ContentType.ENUM,                        \"controlConfig\":                        {                            \"prepareList\":                            {                                \"bindTo\": \"onPrepareReactionModeList\"                            }                        },                        \"isRequired\": true,                        \"layout\":                        {                            \"column\": 0,                            \"row\": 1,                            \"colSpan\": 24                        },                        \"labelConfig\":                        {                            \"visible\": false                        },                        \"wrapClass\": [\"no-caption-control\"]                    }                },                /* \"IsSmsDelivered\" checkbox.*/                {                    \"operation\": \"insert\",                    \"parentName\": \"ReactionContainer\",                    \"propertyName\": \"items\",                    \"name\": \"IsSmsDelivered\",                    \"values\":                    {                        \"wrapClass\": [\"t-checkbox-control\"],                        \"visible\":                        {                            \"bindTo\": \"ReactionMode\",                            \"bindConfig\":                            {                                converter: \"getIsReactionModeWithConditions\"                            }                        },                        \"caption\":                        {                            \"bindTo\": \"Resources.Strings.IsSmsDelivered\"                        },                        \"layout\":                        {                            \"column\": 0,                            \"row\": 2,                            \"colSpan\": 22                        }                    }                },                /* \"IsErrorWhileReceiving\" checkbox.*/                {                    \"operation\": \"insert\",                    \"parentName\": \"ReactionContainer\",                    \"propertyName\": \"items\",                    \"name\": \"IsErrorWhileReceiving\",                    \"values\":                    {                        \"wrapClass\": [\"t-checkbox-control\"],                        \"visible\":                        {                            \"bindTo\": \"ReactionMode\",                            \"bindConfig\":                            {                                converter: \"getIsReactionModeWithConditions\"                            }                        },                        \"caption\":                        {                            \"bindTo\": \"Resources.Strings.IsErrorWhileReceiving\"                        },                        \"layout\":                        {                            \"column\": 0,                            \"row\": 3,                            \"colSpan\": 22                        }                    }                }            ]/**SCHEMA_DIFF*/        };    });",
      "language": "js",
      "context": "Implement the business logicof the campaign element flow.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "namespace Terrasoft.Configuration{    using System;    using System.Collections.Generic;    using System.Linq;    using Terrasoft.Common;    using Terrasoft.Core.DB;    /* Define a custom element flow. */    public class UsrSmsConditionalTransitionFlowElement        : ConditionalTransitionFlowElement    {        /* Assign the \"SmsText\" attribute value in the class. */        public string SmsText {            get;            set;        }        /* Assign the \"PhoneNumber\" attribute value in the class. */        public string PhoneNumber {            get;            set;        }        /* Assign the collection of SMS response IDs in the class. */        public IEnumerable<Guid> SmsResponses {            get;            set;        }        /* Extend the base \"TransitionQuery\" with participant responses        filter. */        private void ExtendWithResponses() {            TransitionQuery.CheckArgumentNull(\"TransitionQuery\");            if (SmsResponses.Any()) {                Query responseSelect = GetSelectByParticipantResponses();                TransitionQuery.And(\"ContactId\").In(responseSelect);            }        }        /* Build a subquery selecting \"ContactId\" from \"UsrSmsRecipient\"        filtered by \"SmsText,\" \"PhoneNumber,\" and \"SmsResponseId.\" */        private Query GetSelectByParticipantResponses() {            var responseSelect = new Select(UserConnection)                .Column(\"ContactId\")                .From(\"UsrSmsRecipient\")                .Where(\"SmsText\").IsEqual(Column.Parameter(SmsText))                    .And(\"PhoneNumber\").IsEqual(Column.Parameter(PhoneNumber))                    .And(\"SmsResponseId\")                        .In(Column.Parameters(SmsResponses)) as Select;            responseSelect.SpecifyNoLockHints(true);            return responseSelect;        }        /* Extend base query with response filters. */        protected override void CreateQuery() {            base.CreateQuery();            ExtendWithResponses();        }    }}",
      "language": "cs",
      "context": "Implement an executable elementthat collects responses of the bulk SMS.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "namespace Terrasoft.Configuration{    using System;    using System.Collections.Generic;    using System.Collections.ObjectModel;    using System.Globalization;    using System.Linq;    using Newtonsoft.Json;    using Terrasoft.Common;    using Terrasoft.Core;    using Terrasoft.Core.Campaign;    using Terrasoft.Core.DB;    using Terrasoft.Core.Process;        [DesignModeProperty(        Name = \"SmsResponseId\",        UsageType = DesignModeUsageType.NotVisible,        MetaPropertyName = SmsResponseIdPropertyName)]    [DesignModeProperty(        Name = \"IsResponseBasedStart\",        UsageType = DesignModeUsageType.Advanced,        MetaPropertyName = IsResponseBasedStartPropertyName)]        public class UsrSmsConditionalTransitionElement        : ConditionalSequenceFlowElement    {        /* Constants for property names used in metadata serialization. */        private const string SmsResponseIdPropertyName = \"SmsResponseId\";        private const string IsResponseBasedStartPropertyName = \"IsResponseBasedStart\";        /* Default constructor. */        public UsrSmsConditionalTransitionElement() {}        /* Copy constructor without rebind and schema. */        public UsrSmsConditionalTransitionElement(            UsrSmsConditionalTransitionElement source)            : this(source, null, null)         {}        /* Copy constructors for cloning the element in schema operations. */        public UsrSmsConditionalTransitionElement(            UsrSmsConditionalTransitionElement source,            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema)            : base(source, dictToRebind, parentSchema) {                IsResponseBasedStart = source.IsResponseBasedStart;                _smsResponseIdJson = JsonConvert.SerializeObject(                    source.SmsResponseId                );        }        /* Store \"SmsResponseId\" in serialized JSON format. */        private string _smsResponseIdJson;        /* Internal helper property, return the collection of response IDs. */        private IEnumerable<Guid> Responses {            get {                return SmsResponseId;            }        }        /* Meta property that stores a collection of SMS response IDs. */        [MetaTypeProperty(\"{DC597899-B831-458A-A58E-FB43B1E266AC}\")]        public IEnumerable<Guid> SmsResponseId {            get {                return !string.IsNullOrWhiteSpace(_smsResponseIdJson)                    ? JsonConvert.DeserializeObject<IEnumerable<Guid>>(_smsResponseIdJson)                    : Enumerable.Empty<Guid>();            }        }        /* Meta property that defines if the transition starts based on a        response. */        [MetaTypeProperty(\"{3FFA4EA0-62CC-49A8-91FF-4096AEC561F6}\",        IsExtraProperty = true, IsUserProperty = true)]        public virtual bool IsResponseBasedStart {            get;            set;        }        /* Read element metadata from the schema definition during        deserialization. */        protected override void ApplyMetaDataValue(DataReader reader) {            base.ApplyMetaDataValue(reader);            switch (reader.CurrentName) {                case SmsResponseIdPropertyName:                    _smsResponseIdJson = reader.GetValue<string>();                    break;                case IsResponseBasedStartPropertyName:                    IsResponseBasedStart = reader.GetBoolValue();                    break;                default:                    break;            }        }        /* Write element metadata to the schema definition during serialization. */        public override void WriteMetaData(DataWriter writer) {            base.WriteMetaData(writer);            writer.WriteValue(                IsResponseBasedStartPropertyName,                IsResponseBasedStart,                false            );            writer.WriteValue(                SmsResponseIdPropertyName,                _smsResponseIdJson,                null            );        }        /* Create a clone of the schema element. */        public override object Clone() {            return new UsrSmsConditionalTransitionElement(this);        }        /* Create a copy of the element using rebind support for schema references. */        public override object Copy(            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema        ) {            return new UsrSmsConditionalTransitionElement(                this,                dictToRebind,                parentSchema            );        }        /* Create the runtime process flow element that will be executed in        the campaign. Pass metadata values to the executable process element. */        public override ProcessFlowElement CreateProcessFlowElement(            UserConnection userConnection        ) {            var sourceElement = SourceRef as UsrSmsElement;            var executableElement = new UsrSmsConditionalTransitionFlowElement {                UserConnection = userConnection,                SmsResponses = SmsResponseId,                PhoneNumber = sourceElement.PhoneNumber,                SmsText = sourceElement.SmsText            };            InitializeCampaignProcessFlowElement(executableElement);            InitializeCampaignTransitionFlowElement(executableElement);            InitializeConditionalTransitionFlowElement(executableElement);            return executableElement;        }    }}",
      "language": "cs",
      "context": "Override the methods.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "define(\"UsrSmsCampaignConnectorManager\", [], function() {    Ext.define(\"Terrasoft.UsrSmsCampaignConnectorManager\", {        /* Override the standard \"CampaignConnectorManager\" module to extend        its logic with custom SMS connector handling. */        override: \"Terrasoft.CampaignConnectorManager\",        /* Initialize mapping between the campaign element (arrow source) and        the corresponding transition schema (arrow type). Add a mapping for        the custom SMS element. */        initMappingCollection: function() {            this.callParent(arguments);            this.connectorTypesMappingCollection.addIfNotExists(                \"UsrSmsElement\",                \"Terrasoft.UsrProcessSmsConditionalTransitionSchema\"            );        },        /* Virtual method override. Called before the arrow is replaced with        a new type. Can be used to execute additional preprocessing logic        when the connector type changes. */        additionalBeforeChange: function(prevTransition, sourceItem, targetItem) {            /* Implement custom preprocessing logic. */        },        /* Virtual method override. Populate additional properties of the        new arrow based on the properties of the previous arrow. */        fillAdditionalProperties: function(prevElement, newElement) {            if (newElement.getTypeInfo().typeName === \"UsrProcessSmsConditionalTransitionSchema\") {                /* Copy the configured SMS responses from the previous arrow,                if they exist. */                newElement.smsResponseId = prevElement.smsResponseId                    ? prevElement.smsResponseId                    : null;                /* Copy the flag that defines whether the transition is response-based. */                newElement.isResponseBasedStart = prevElement.isResponseBasedStart                    ? prevElement.isResponseBasedStart                    : false;            }        }    });});",
      "language": "js",
      "context": "Add the source code.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "/* Define a replacing view model schema named \"BootstrapModulesV2.\" This schemais used to include additional client modules that must be loaded during theapp startup process. Custom SMS campaign connector manager and the customconditional transition schema are added as dependencies.\"UsrSmsCampaignConnectorManager\" is the previously created custom connectormanager that overrides \"CampaignConnectorManager\" and implements SMS-specificflow logic.\"UsrProcessSmsConditionalTransitionSchema\" is the custom schema that definesthe conditional transition for the SMS campaign element.*/define(\"BootstrapModulesV2\", [\"UsrSmsCampaignConnectorManager\",    \"UsrProcessSmsConditionalTransitionSchema\"], function() {});/* Explicitly require the same dependencies to ensure they are loaded atruntime when the app starts. */require([\"UsrSmsCampaignConnectorManager\",\"UsrProcessSmsConditionalTransitionSchema\"]);",
      "language": "js",
      "context": "Add the source code.",
      "tab_label": "",
      "line_count": 1
    },
    {
      "code": "namespace Terrasoft.Configuration{    using System;    using System.Collections.Generic;    using System.Collections.ObjectModel;    using System.Globalization;    using System.Linq;    using Newtonsoft.Json;    using Terrasoft.Common;    using Terrasoft.Core;    using Terrasoft.Core.Campaign;    using Terrasoft.Core.DB;    using Terrasoft.Core.Process;    [DesignModeProperty(        Name = \"SmsResponseId\",        UsageType = DesignModeUsageType.NotVisible,        MetaPropertyName = SmsResponseIdPropertyName)]    [DesignModeProperty(        Name = \"IsResponseBasedStart\",        UsageType = DesignModeUsageType.Advanced,        MetaPropertyName = IsResponseBasedStartPropertyName)]    public class UsrSmsConditionalTransitionElement        : ConditionalSequenceFlowElement    {        /* Constants for property names used in metadata serialization. */        private const string SmsResponseIdPropertyName = \"SmsResponseId\";        private const string IsResponseBasedStartPropertyName = \"IsResponseBasedStart\";        /* Default constructor. */        public UsrSmsConditionalTransitionElement() {}        /* Copy constructor without rebind and schema. */        public UsrSmsConditionalTransitionElement(            UsrSmsConditionalTransitionElement source)            : this(source, null, null)         {}        /* Copy constructors for cloning the element in schema operations. */        public UsrSmsConditionalTransitionElement(            UsrSmsConditionalTransitionElement source,            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema)            : base(source, dictToRebind, parentSchema) {                IsResponseBasedStart = source.IsResponseBasedStart;                _smsResponseIdJson = JsonConvert.SerializeObject(                    source.SmsResponseId                );        }        /* Store \"SmsResponseId\" in serialized JSON format. */        private string _smsResponseIdJson;        /* Internal helper property, return the collection of response IDs. */        private IEnumerable<Guid> Responses {            get {                return SmsResponseId;            }        }        /* Meta property that stores a collection of SMS response IDs. */        [MetaTypeProperty(\"{DC597899-B831-458A-A58E-FB43B1E266AC}\")]        public IEnumerable<Guid> SmsResponseId {            get {                return !string.IsNullOrWhiteSpace(_smsResponseIdJson)                    ? JsonConvert.DeserializeObject<IEnumerable<Guid>>(_smsResponseIdJson)                    : Enumerable.Empty<Guid>();            }        }        /* Meta property that defines if the transition starts based on a        response. */        [MetaTypeProperty(\"{3FFA4EA0-62CC-49A8-91FF-4096AEC561F6}\",        IsExtraProperty = true, IsUserProperty = true)]        public virtual bool IsResponseBasedStart {            get;            set;        }        /* Read element metadata from the schema definition during        deserialization. */        protected override void ApplyMetaDataValue(DataReader reader) {            base.ApplyMetaDataValue(reader);            switch (reader.CurrentName) {                case SmsResponseIdPropertyName:                    _smsResponseIdJson = reader.GetValue<string>();                    break;                case IsResponseBasedStartPropertyName:                    IsResponseBasedStart = reader.GetBoolValue();                    break;                default:                    break;            }        }        /* Write element metadata to the schema definition during serialization. */        public override void WriteMetaData(DataWriter writer) {            base.WriteMetaData(writer);            writer.WriteValue(                IsResponseBasedStartPropertyName,                IsResponseBasedStart,                false            );            writer.WriteValue(                SmsResponseIdPropertyName,                _smsResponseIdJson,                null            );        }        /* Create a clone of the schema element. */        public override object Clone() {            return new UsrSmsConditionalTransitionElement(this);        }        /* Create a copy of the element using rebind support for schema references. */        public override object Copy(            Dictionary<Guid, Guid> dictToRebind,            Core.Campaign.CampaignSchema parentSchema        ) {            return new UsrSmsConditionalTransitionElement(                this,                dictToRebind,                parentSchema            );        }        /* Create the runtime process flow element that will be executed in        the campaign. Pass metadata values to the executable process element. */        public override ProcessFlowElement CreateProcessFlowElement(            UserConnection userConnection        ) {            var sourceElement = SourceRef as UsrSmsElement;            var executableElement = new UsrSmsConditionalTransitionFlowElement {                UserConnection = userConnection,                SmsResponses = SmsResponseId,                PhoneNumber = sourceElement.PhoneNumber,                SmsText = sourceElement.SmsText            };            InitializeCampaignProcessFlowElement(executableElement);            InitializeCampaignTransitionFlowElement(executableElement);            InitializeConditionalTransitionFlowElement(executableElement);            return executableElement;        }    }}",
      "language": "cs",
      "context": "Source code\u200b",
      "tab_label": "",
      "line_count": 1
    }
  ],
  "tables": [
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "General property block"
        ],
        [
          "Code",
          "UsrSmsSendingStatus"
        ],
        [
          "Title",
          "SMS sending status"
        ],
        [
          "Inheritance property block"
        ],
        [
          "Parent object",
          "BaseLookup"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><th colspan=\"2\"><p>General property block</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsSendingStatus</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>SMS sending status</p></center></td></tr><tr><th colspan=\"2\"><p>Inheritance property block</p></th></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>BaseLookup</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Name",
          "SMS sending status"
        ],
        [
          "Object",
          "SMS sending status"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><p>Name</p></td><td><p>SMS sending status</p></td></tr><tr><td><p>Object</p></td><td><p>SMS sending status</p></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "General property block"
        ],
        [
          "Code",
          "UsrSmsRecipient"
        ],
        [
          "Title",
          "Sms recipient"
        ],
        [
          "Inheritance property block"
        ],
        [
          "Parent object",
          "BaseEntity"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><th colspan=\"2\"><p>General property block</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsRecipient</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Sms recipient</p></center></td></tr><tr><th colspan=\"2\"><p>Inheritance property block</p></th></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>BaseEntity</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Column",
          "Column type",
          "Property",
          "Property value"
        ],
        [
          "Column that contains the phone number",
          "Text (50 characters)",
          "Code",
          "UsrPhoneNumber"
        ],
        [
          "Title",
          "Phone"
        ],
        [
          "Column that contains the SMS text",
          "Text (50 characters)",
          "Code",
          "UsrSmsText"
        ],
        [
          "Title",
          "SMS text"
        ],
        [
          "Column that contains the SMS receiver",
          "Lookup",
          "Code",
          "UsrContactLookup"
        ],
        [
          "Title",
          "Contact"
        ],
        [
          "Lookup",
          "Contact"
        ],
        [
          "Column that contains the SMS sending status",
          "Lookup",
          "Code",
          "UsrSmsSendingStatusLookup"
        ],
        [
          "Title",
          "SMS sending status"
        ],
        [
          "Lookup",
          "UsrSmsSendingStatus"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Column</p></th><th><p>Column type</p></th><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td rowspan=\"2\"><p>Column that contains the phone number</p></td><td rowspan=\"2\"><center><p>Text (50 characters)</p></center></td><td><center><p>Code</p></center></td><td><center><p>UsrPhoneNumber</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Phone</p></center></td></tr><tr><td rowspan=\"2\"><p>Column that contains the SMS text</p></td><td rowspan=\"2\"><center><p>Text (50 characters)</p></center></td><td><center><p>Code</p></center></td><td><center><p>UsrSmsText</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>SMS text</p></center></td></tr><tr><td rowspan=\"3\"><p>Column that contains the SMS receiver</p></td><td rowspan=\"3\"><center><p>Lookup</p></center></td><td><center><p>Code</p></center></td><td><center><p>UsrContactLookup</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Contact</p></center></td></tr><tr><td><center><p>Lookup</p></center></td><td><center><p>Contact</p></center></td></tr><tr><td rowspan=\"3\"><p>Column that contains the SMS sending status</p></td><td rowspan=\"3\"><center><p>Lookup</p></center></td><td><center><p>Code</p></center></td><td><center><p>UsrSmsSendingStatusLookup</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>SMS sending status</p></center></td></tr><tr><td><center><p>Lookup</p></center></td><td><center><p>UsrSmsSendingStatus</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "General property block"
        ],
        [
          "Code",
          "UsrSmsResponses"
        ],
        [
          "Title",
          "SMS responses"
        ],
        [
          "Inheritance property block"
        ],
        [
          "Parent object",
          "BaseEntity"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><th colspan=\"2\"><p>General property block</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsResponses</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>SMS responses</p></center></td></tr><tr><th colspan=\"2\"><p>Inheritance property block</p></th></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>BaseEntity</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Column",
          "Column type",
          "Property",
          "Property value"
        ],
        [
          "Column that contains the SMS response",
          "Text (50 characters)",
          "Code",
          "UsrResponse"
        ],
        [
          "Title",
          "Response"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Column</p></th><th><p>Column type</p></th><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td rowspan=\"2\"><p>Column that contains the SMS response</p></td><td rowspan=\"2\"><center><p>Text (50 characters)</p></center></td><td><center><p>Code</p></center></td><td><center><p>UsrResponse</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Response</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Code",
          "UsrProcessSmsConditionalTransitionSchema"
        ],
        [
          "Title",
          "Element conditional transition schema"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrProcessSmsConditionalTransitionSchema</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Element conditional transition schema</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Parent object",
          "CampaignElementSchemaManagerEx"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>CampaignElementSchemaManagerEx</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Code",
          "UsrSmsConditionalTransitionPropertiesPanel"
        ],
        [
          "Title",
          "Properties panel for the custom flow"
        ],
        [
          "Parent object",
          "CampaignConditionalSequenceFlowPropertiesPage"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsConditionalTransitionPropertiesPanel</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Properties panel for the custom flow</p></center></td></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>CampaignConditionalSequenceFlowPropertiesPage</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Code",
          "Value"
        ],
        [
          "ReactionModeCaption",
          "What is the result of the {0} step?"
        ],
        [
          "ReactionModeDefault",
          "Transfer participants regardless of their response"
        ],
        [
          "ReactionModeWithCondition",
          "Set up responses for transferring participants"
        ],
        [
          "IsSmsDelivered",
          "SMS is delivered"
        ],
        [
          "IsErrorWhileReceiving",
          "Error while receiving"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Code</p></th><th><p>Value</p></th></tr><tr><td><center><p>ReactionModeCaption</p></center></td><td><center><p>What is the result of the {0} step?</p></center></td></tr><tr><td><center><p>ReactionModeDefault</p></center></td><td><center><p>Transfer participants regardless of their response</p></center></td></tr><tr><td><center><p>ReactionModeWithCondition</p></center></td><td><center><p>Set up responses for transferring participants</p></center></td></tr><tr><td><center><p>IsSmsDelivered</p></center></td><td><center><p>SMS is delivered</p></center></td></tr><tr><td><center><p>IsErrorWhileReceiving</p></center></td><td><center><p>Error while receiving</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Code",
          "UsrSmsConditionalTransitionFlowElement"
        ],
        [
          "Title",
          "Conditional transition of the SMS process element"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsConditionalTransitionFlowElement</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Conditional transition of the SMS process element</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Code",
          "UsrSmsConditionalTransitionElement"
        ],
        [
          "Title",
          "Transition the SMS element"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsConditionalTransitionElement</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>Transition the SMS element</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Code",
          "UsrSmsCampaignConnectorManager"
        ],
        [
          "Title",
          "SMS campaign connector manager"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Code</p></center></td><td><center><p>UsrSmsCampaignConnectorManager</p></center></td></tr><tr><td><center><p>Title</p></center></td><td><center><p>SMS campaign connector manager</p></center></td></tr></tbody></table>"
    },
    {
      "headers": [],
      "rows": [
        [
          "Property",
          "Property value"
        ],
        [
          "Parent object",
          "BootstrapModulesV2"
        ]
      ],
      "caption": "",
      "html": "<table><tbody><tr><th><p>Property</p></th><th><p>Property value</p></th></tr><tr><td><center><p>Parent object</p></center></td><td><center><p>BootstrapModulesV2</p></center></td></tr></tbody></table>"
    }
  ],
  "callouts": [
    {
      "type": "info",
      "title": "SMS",
      "content": "ExampleCreate a custom conditional flow for the customSMScampaign element. The flow must execute the following actions:Omit the responses to the bulk SMS.Handle delivered SMS responses and SMS responses whose receiving ends with error.Receive SMS responses, regardless of their value.",
      "html": "<div class=\"theme-admonition theme-admonition-info alert alert--info admonition_WoCw\"><div class=\"admonitionHeading_TMsN\">Example</div><div class=\"admonitionContent_vXIg\"><p>Create a custom conditional flow for the custom <strong>SMS</strong> campaign element. The flow must execute the following actions:</p><ul>\n<li>\n<p>Omit the responses to the bulk SMS.</p>\n<figure><figcaption> <a id=\"view-result\" name=\"view-result\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result.png\"/></div></figure>\n</li>\n<li>\n<p>Handle delivered SMS responses and SMS responses whose receiving ends with error.</p>\n<figure><figcaption> <a id=\"scr_result_1.png\" name=\"scr_result_1.png\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_1.png\"/></div></figure>\n</li>\n<li>\n<p>Receive SMS responses, regardless of their value.</p>\n<figure><figcaption> <a id=\"view-result-2\" name=\"view-result-2\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_2.png\"/></div></figure>\n</li>\n</ul></div></div>"
    },
    {
      "type": "note",
      "title": "Note",
      "content": "Example",
      "html": "<div class=\"admonitionHeading_TMsN\">Example</div>"
    },
    {
      "type": "note",
      "title": "SMS",
      "content": "Create a custom conditional flow for the customSMScampaign element. The flow must execute the following actions:Omit the responses to the bulk SMS.Handle delivered SMS responses and SMS responses whose receiving ends with error.Receive SMS responses, regardless of their value.",
      "html": "<div class=\"admonitionContent_vXIg\"><p>Create a custom conditional flow for the custom <strong>SMS</strong> campaign element. The flow must execute the following actions:</p><ul>\n<li>\n<p>Omit the responses to the bulk SMS.</p>\n<figure><figcaption> <a id=\"view-result\" name=\"view-result\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result.png\"/></div></figure>\n</li>\n<li>\n<p>Handle delivered SMS responses and SMS responses whose receiving ends with error.</p>\n<figure><figcaption> <a id=\"scr_result_1.png\" name=\"scr_result_1.png\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_1.png\"/></div></figure>\n</li>\n<li>\n<p>Receive SMS responses, regardless of their value.</p>\n<figure><figcaption> <a id=\"view-result-2\" name=\"view-result-2\"></a></figcaption><div class=\"img-cotainer\"><img class=\"medium-zoom-image\" src=\"https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_2.png\"/></div></figure>\n</li>\n</ul></div>"
    }
  ],
  "images": [
    {
      "src": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result.png",
      "alt": "",
      "title": "",
      "context": "Omit the responses to the bulk SMS.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_9b48fb7103c4.png"
    },
    {
      "src": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_1.png",
      "alt": "",
      "title": "",
      "context": "Handle delivered SMS responses and SMS responses whose receiving ends with error.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_c0889964c035.png"
    },
    {
      "src": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/ImplementFlowForCampaignElement/8.3/scr_result_2.png",
      "alt": "",
      "title": "",
      "context": "Receive SMS responses, regardless of their value.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_cae089851135.png"
    },
    {
      "src": "https://academy.creatio.com/sites/en/files/images/NoCodePlatform/Manage_Apps/btn_system_designer_8_shell.png",
      "alt": "",
      "title": "",
      "context": "Clickin the top right \u2192System setup\u2192Lookups.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_cee82ad814f6.png"
    },
    {
      "src": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/icons/8.2/scr_add_button_in_schema.png",
      "alt": "",
      "title": "",
      "context": "Click\u2192 select column type \u2192 fill out the column properties.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_86c6f434c560.png"
    },
    {
      "src": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/documentation/sdk/en/BPMonlineWebSDK/Screenshots/icons/8.2/scr_add_button_in_schema.png",
      "alt": "",
      "title": "",
      "context": "Click\u2192 select column type \u2192 fill out the column properties.",
      "width": "",
      "height": "",
      "local_path": "creatio-docs-full/images/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_86c6f434c560.png"
    }
  ],
  "videos": [],
  "downloadables": [
    {
      "url": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/packages/ImplementCampaignElement/8.3/sdkCustomCampaignElement_2025-09-18_14.08.36.zip",
      "text": "Package with example implementation (campaign element)",
      "filename": "sdkCustomCampaignElement_2025-09-18_14.08.36.zip",
      "type": "zip",
      "local_path": "creatio-docs-full/downloads/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_sdkCustomCampaignElement_2025-09-18_14.08.36.zip"
    },
    {
      "url": "https://d3a7ykdi65m4cy.cloudfront.net/ac-en/s3fs-public/packages/ImplementCustomCampaignElement/8.3/sdkCustomCampaignElementFlow_2025-09-19_15.49.06.zip",
      "text": "Package with example implementation (flow for campaign element)",
      "filename": "sdkCustomCampaignElementFlow_2025-09-19_15.49.06.zip",
      "type": "zip",
      "local_path": "creatio-docs-full/downloads/22ff73fce6839607_freedom-ui_marketing-campaigns-basics_examples_implement-a-campaign-element-flow_sdkCustomCampaignElementFlow_2025-09-19_15.49.06.zip"
    }
  ],
  "headings": [
    {
      "level": 1,
      "text": "Implement a custom flow for a campaign element",
      "anchor": ""
    },
    {
      "level": 2,
      "text": "1. Implement a custom campaign element\u200b",
      "anchor": "title-1457-1"
    },
    {
      "level": 2,
      "text": "2. Create a schema for the campaign element flow\u200b",
      "anchor": "title-1457-2"
    },
    {
      "level": 3,
      "text": "1. Create the SMS sending status lookup\u200b",
      "anchor": "title-15713-1"
    },
    {
      "level": 3,
      "text": "2. Create SMS recipient object\u200b",
      "anchor": "title-15713-2"
    },
    {
      "level": 3,
      "text": "3. Create SMS responses object\u200b",
      "anchor": "title-15713-3"
    },
    {
      "level": 3,
      "text": "4. Create a flow for a campaign element\u200b",
      "anchor": "title-15713-4"
    },
    {
      "level": 3,
      "text": "5. Add the campaign element frow to the Campaign Designer\u200b",
      "anchor": "title-15713-5"
    },
    {
      "level": 2,
      "text": "3. Create a property panel for the campaign element flow\u200b",
      "anchor": "title-1457-3"
    },
    {
      "level": 2,
      "text": "4. Create an executable element for the campaign element flow\u200b",
      "anchor": "title-1457-4"
    },
    {
      "level": 2,
      "text": "5. Implement the business logic of the campaign element flow\u200b",
      "anchor": "title-1457-5"
    },
    {
      "level": 2,
      "text": "6. Extend campaign connector manager\u200b",
      "anchor": "title-1457-6"
    },
    {
      "level": 2,
      "text": "7. Connect the business logic of the campaign element flow\u200b",
      "anchor": "title-1457-7"
    },
    {
      "level": 2,
      "text": "View the result\u200b",
      "anchor": "title-1457-10"
    },
    {
      "level": 2,
      "text": "Source code\u200b",
      "anchor": "source-code"
    },
    {
      "level": 2,
      "text": "Resources\u200b",
      "anchor": "resources"
    }
  ],
  "api_docs": {
    "endpoints": [
      {
        "method": "DEFINE",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "ON",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "INITREACTIONMODE",
        "path": "("
      },
      {
        "method": "INITSMSRESPONSES",
        "path": "("
      },
      {
        "method": "ELLIPSIS",
        "path": "("
      },
      {
        "method": "SUBSTRING",
        "path": "("
      },
      {
        "method": "SUBSTRING",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "PARSE",
        "path": "("
      },
      {
        "method": "GETRESPONSECONFIG",
        "path": "("
      },
      {
        "method": "EACH",
        "path": "("
      },
      {
        "method": "INDEXOF",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "SETLOOKUPVALUE",
        "path": "("
      },
      {
        "method": "PARSE",
        "path": "("
      },
      {
        "method": "ISARRAY",
        "path": "("
      },
      {
        "method": "PREPARELIST",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "GETISREACTIONMODEWITHCONDITIONS",
        "path": "("
      },
      {
        "method": "GETSMSRESPONSEID",
        "path": "("
      },
      {
        "method": "GETRESPONSECONFIG",
        "path": "("
      },
      {
        "method": "EACH",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "STRINGIFY",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "ISLOOKUPVALUEEQUAL",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "FINDSOURCEELEMENT",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "FORMAT",
        "path": "("
      },
      {
        "method": "GETSOURCEELEMENT",
        "path": "("
      },
      {
        "method": "GETCAPTION",
        "path": "("
      },
      {
        "method": "DESERIALIZEOBJECT",
        "path": "<"
      },
      {
        "method": "<",
        "path": "IEnumerable"
      },
      {
        "method": "IENUMERABLE",
        "path": "<"
      },
      {
        "method": "<",
        "path": "Guid"
      },
      {
        "method": "GUID",
        "path": ">"
      },
      {
        "method": ">",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "EMPTY",
        "path": "<"
      },
      {
        "method": "<",
        "path": "Guid"
      },
      {
        "method": "GUID",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "GETVALUE",
        "path": "<"
      },
      {
        "method": "<",
        "path": "string"
      },
      {
        "method": "STRING",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "DEFINE",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "ADDIFNOTEXISTS",
        "path": "("
      },
      {
        "method": "GETTYPEINFO",
        "path": "("
      },
      {
        "method": "DEFINE",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "ON",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "INITREACTIONMODE",
        "path": "("
      },
      {
        "method": "INITSMSRESPONSES",
        "path": "("
      },
      {
        "method": "ELLIPSIS",
        "path": "("
      },
      {
        "method": "SUBSTRING",
        "path": "("
      },
      {
        "method": "SUBSTRING",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "PARSE",
        "path": "("
      },
      {
        "method": "GETRESPONSECONFIG",
        "path": "("
      },
      {
        "method": "EACH",
        "path": "("
      },
      {
        "method": "INDEXOF",
        "path": "("
      },
      {
        "method": "SET",
        "path": "("
      },
      {
        "method": "SETLOOKUPVALUE",
        "path": "("
      },
      {
        "method": "PARSE",
        "path": "("
      },
      {
        "method": "ISARRAY",
        "path": "("
      },
      {
        "method": "PREPARELIST",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "GETISREACTIONMODEWITHCONDITIONS",
        "path": "("
      },
      {
        "method": "GETSMSRESPONSEID",
        "path": "("
      },
      {
        "method": "GETRESPONSECONFIG",
        "path": "("
      },
      {
        "method": "EACH",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "PUSH",
        "path": "("
      },
      {
        "method": "STRINGIFY",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "ISLOOKUPVALUEEQUAL",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "FINDSOURCEELEMENT",
        "path": "("
      },
      {
        "method": "GET",
        "path": "("
      },
      {
        "method": "FORMAT",
        "path": "("
      },
      {
        "method": "GETSOURCEELEMENT",
        "path": "("
      },
      {
        "method": "GETCAPTION",
        "path": "("
      },
      {
        "method": "DESERIALIZEOBJECT",
        "path": "<"
      },
      {
        "method": "<",
        "path": "IEnumerable"
      },
      {
        "method": "IENUMERABLE",
        "path": "<"
      },
      {
        "method": "<",
        "path": "Guid"
      },
      {
        "method": "GUID",
        "path": ">"
      },
      {
        "method": ">",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "EMPTY",
        "path": "<"
      },
      {
        "method": "<",
        "path": "Guid"
      },
      {
        "method": "GUID",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "GETVALUE",
        "path": "<"
      },
      {
        "method": "<",
        "path": "string"
      },
      {
        "method": "STRING",
        "path": ">"
      },
      {
        "method": ">",
        "path": "("
      },
      {
        "method": "DEFINE",
        "path": "("
      },
      {
        "method": "CALLPARENT",
        "path": "("
      },
      {
        "method": "ADDIFNOTEXISTS",
        "path": "("
      },
      {
        "method": "GETTYPEINFO",
        "path": "("
      }
    ],
    "parameters": [],
    "responses": [],
    "examples": []
  },
  "sidebar_items": [
    {
      "href": "/docs/8.x/dev/",
      "text": "Guides",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/marketing-campaigns-basics/examples/implement-a-campaign-element-flow",
      "text": "Implement a flow for a campaign element",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/8.2/platform-customization/freedom-ui/marketing-campaigns-basics/examples/implement-a-campaign-element-flow",
      "text": "8.2",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/8.1/getting-started/development-recommendations",
      "text": "8.1",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/8.0/getting-started/development-recommendations",
      "text": "8.0",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/getting-started",
      "text": "Getting started",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/getting-started/development-recommendations",
      "text": "Development recommendations",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/architecture",
      "text": "Architecture",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/architecture/creatio-platform",
      "text": "Platform",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/microservices",
      "text": "Microservices",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/creatio-development",
      "text": "Creatio development",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/development-tools",
      "text": "Development tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/creatio-ide",
      "text": "Creatio IDE",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/external-ides",
      "text": "External IDEs",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/packages",
      "text": "Packages",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/clio-utility",
      "text": "Clio utility",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/version-control-tools",
      "text": "Version control tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/testing-tools",
      "text": "Testing tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/database-tools",
      "text": "Database tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/logging-tools",
      "text": "Logging tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/debugging-tools",
      "text": "Debugging tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/delivery-tools",
      "text": "Delivery tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/back-end-development",
      "text": "Back-end development",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/back-end-development/types-visibility",
      "text": ".NET types visibility",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/replacing-class-factory",
      "text": "Replacing class factory",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/data-operations-back-end",
      "text": "Data operations (back-end)",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/web-services",
      "text": "Web services",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/back-end-development/objects-business-logic",
      "text": "Object events",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/redistribute-licenses",
      "text": "Redistribute licenses",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/back-end-development/data-storage-and-cache",
      "text": "Data storage and cache",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/localizable-resources",
      "text": "Localizable resources",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/back-end-development/automatic-data-binding",
      "text": "Automatic data binding",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/manage-files",
      "text": "Manage files",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/back-end-development/net-class-libraries-of-platform-core",
      "text": ".NET classes reference",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/front-end-development",
      "text": "Front-end development",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/front-end-development/data-fetching",
      "text": "Best practices for data fetching",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/freedom-ui",
      "text": "Freedom UI",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/classic-ui",
      "text": "Classic UI",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/platform-customization",
      "text": "Platform customization",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/freedom-ui-customization",
      "text": "Freedom UI",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/page-customization",
      "text": "Page customization",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/page-customization-basics/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/page-customization-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/page-customization-references",
      "text": "References",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/creatioai",
      "text": "Creatio.ai",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/creatio-ai/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/creatio-ai-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/creatio-ai-references",
      "text": "References",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/field",
      "text": "Field",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/customize-page-fields/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/page-fields-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/toggle-panel",
      "text": "Toggle panel",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/overview",
      "text": "Timeline",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/communication-options",
      "text": "Communication options",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/\u0441ommunication-option",
      "text": "\u0421ommunication option",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/communication-type",
      "text": "Communication type",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/custom-action-menu",
      "text": "Custom action menu",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/sidebar",
      "text": "Sidebar",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/sidebar/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/sidebar-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/selection-window",
      "text": "Selection window",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/selection-window/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/lookup-window-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/dialog-window",
      "text": "Dialog window",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/dialog-window/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/dialog-window-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/system-variable",
      "text": "System variable",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/display-the-value-of-a-system-variable/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/system-variable-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/system-variable-references",
      "text": "References",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/system-setting",
      "text": "System setting",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/system-setting/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/system-setting-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/chats",
      "text": "Chats",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/chat-management-api/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/chat-references",
      "text": "References",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/word-reports",
      "text": "Word reports",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/ms-word/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/ms-word-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/word-report-references",
      "text": "References",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/marketing-campaigns",
      "text": "Marketing campaigns",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/marketing-campaigns-basics/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/campaigns-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/marketing-campaigns-basics/examples/implement-a-campaign-element",
      "text": "PreviousImplement a campaign element",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/emails",
      "text": "NextEmails",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/sending-emails/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/emails-sending-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/web-service",
      "text": "Web service",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/send-a-web-service-request/web-service",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/web-service-request-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/additional-feature",
      "text": "Additional feature",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/hide-functionality-on-a-page/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/hide-functionality-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/user-consents",
      "text": "User consent storage",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/business-rules-of-collection-records",
      "text": "Business rules",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/business-processes",
      "text": "Business processes",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/creatio-zone",
      "text": "Creatio zone",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/creatio-zone/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/creatio-zone-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/render-repeated-ui-components",
      "text": "Render repeated components",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/opening-the-page",
      "text": "Opening the page",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/open-a-page-from-a-custom-handler/overview",
      "text": "Overview",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/open-page-examples",
      "text": "Examples",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/freedom-ui/close-the-websocket",
      "text": "Closing the WebSocket",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/classic-ui-1",
      "text": "Classic UI",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/detail",
      "text": "Detail",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/telephony",
      "text": "Telephony",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/machine-learning",
      "text": "Machine learning",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/emails-1",
      "text": "Emails",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/classic-ui/task-scheduler",
      "text": "Task scheduler",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/interface-control-tools",
      "text": "Interface control tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/existing-feature",
      "text": "Existing feature",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/interface-control-tools/overview",
      "text": "Custom feature",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/platform-customization/interface-control-tools/anonymous-access",
      "text": "Retrieve allowed features before login",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/integrations-tools",
      "text": "Integrations tools",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/integrations-and-api/overview",
      "text": "Integration options",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/authentication",
      "text": "Authentication",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/data-services",
      "text": "Data services",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/integrations-and-api/chat-channels-integration",
      "text": "Chats",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/business-process-service",
      "text": "Business process service",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/category/test-api",
      "text": "Test API",
      "active": false
    },
    {
      "href": "/docs/8.x/dev/development-on-creatio-platform/integrations-and-api/integration-examples",
      "text": "API documentation",
      "active": false
    }
  ],
  "related_links": [],
  "version": "8.x",
  "crawled_at": "2026-01-15T02:02:21.449977"
}