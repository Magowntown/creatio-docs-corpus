# Run these one at a time in browser console

# CHECK 1: QB Download records by month (compare to earlier)
fetch("/0/odata/BGCommissionReportQBDownload?$top=5000&$orderby=BGTransactionDate desc&$select=Id,BGTransactionDate,BGAmount").then(function(r){return r.json()}).then(function(d){var byMonth={};d.value.forEach(function(r){if(r.BGTransactionDate){var m=r.BGTransactionDate.substring(0,7);byMonth[m]=byMonth[m]||{count:0,amount:0};byMonth[m].count++;byMonth[m].amount+=(r.BGAmount||0)}});console.log("=== QB Download by Month ===");Object.keys(byMonth).sort().reverse().slice(0,8).forEach(function(m){console.log(m+":",byMonth[m].count,"records, $"+byMonth[m].amount.toFixed(2))})})

# CHECK 2: January orders - how many now have invoice numbers?
fetch("/0/odata/Order?$top=200&$orderby=CreatedOn desc&$select=Id,Number,BGQuickBooksId,BGNumberInvoice,CreatedOn").then(function(r){return r.json()}).then(function(d){var jan=d.value.filter(function(o){return o.CreatedOn&&o.CreatedOn.startsWith("2026-01")});var noQB=jan.filter(function(o){return !o.BGQuickBooksId});var noInv=jan.filter(function(o){return !o.BGNumberInvoice});console.log("=== Order Sync Status ===");console.log("January 2026 orders:",jan.length);console.log("Without BGQuickBooksId:",noQB.length,"(was 87)");console.log("Without Invoice Number:",noInv.length,"(was 88)")})

# CHECK 3: Patricia's orders - do they have invoices now?
fetch("/0/odata/BGCommissionEarner?$top=100&$orderby=CreatedOn desc&$select=Id,BGName,BGOrderId").then(function(r){return r.json()}).then(function(d){var p=d.value.filter(function(e){return e.BGName&&e.BGName.indexOf("Patricia")>=0});window.pEarners=p;console.log("Patricia earners:",p.length);var ids=p.slice(0,20).map(function(e){return e.BGOrderId}).filter(function(x){return x});Promise.all(ids.map(function(id){return fetch("/0/odata/Order("+id+")?$select=Number,BGNumberInvoice").then(function(r){return r.json()})})).then(function(orders){var withInv=orders.filter(function(o){return o.BGNumberInvoice});console.log("Patricia orders with invoice:",withInv.length,"/",orders.length,"(was 8/30)")})})
