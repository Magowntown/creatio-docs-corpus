fetch("/0/odata/BGCommissionReportQBDownload?$top=5000&$orderby=BGTransactionDate desc&$select=Id,BGTransactionDate,BGAmount").then(function(r){return r.json()}).then(function(d){var byMonth={};d.value.forEach(function(r){if(r.BGTransactionDate){var m=r.BGTransactionDate.substring(0,7);byMonth[m]=byMonth[m]||{count:0,amount:0};byMonth[m].count++;byMonth[m].amount+=(r.BGAmount||0)}});console.log("=== QB Download by Month ===");Object.keys(byMonth).sort().reverse().slice(0,8).forEach(function(m){console.log(m+":",byMonth[m].count,"records, $"+byMonth[m].amount.toFixed(2))})})
